<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — API Reference | Libraries | graphics | newMask</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../../css/style.css" />
  <link rel="stylesheet" href="../../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../../guide/index.html">Guides</a></li>
<li><a href="../../../api/index.html">API Reference</a></li>
<li><a href="../../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../../plugin/index.html">Plugins</a></li>
<li><a href="../../../native/index.html">Solar2D Native</a></li>
<li><a href="../../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#graphics.newmask">graphics.newMask()</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#image-mask-requirements">Image Mask Requirements</a></li>
<li><a href="#gotchas">Gotchas</a></li>
<li><a href="#syntax">Syntax</a><ul>
<li><a href="#filename-required">filename <sub><sup>(required)</sup></sub></a></li>
<li><a href="#basedir-optional">baseDir <sub><sup>(optional)</sup></sub></a></li>
</ul></li>
<li><a href="#examples">Examples</a><ul>
<li><a href="#mask-on-image">Mask on Image</a></li>
<li><a href="#mask-on-display-group">Mask on Display Group</a></li>
<li><a href="#dynamically-selected-mask">Dynamically-Selected Mask</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../../api/index.html">API Reference</a>  ▸  <a href="../../../api/library/index.html">Libraries</a>  ▸  <a href="../../../api/library/graphics/index.html">graphics</a>  ▸  <a href="../../../api/library/graphics/newMask.html">newMask</a>
</div>
<section id="graphics.newmask" class="level1">
<h1>graphics.newMask()</h1>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Type</strong></td>
<td style="text-align: left;"><a href="../../../api/type/Function.html">Function</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Library</strong></td>
<td style="text-align: left;"><a href="../../../api/library/graphics/index.html">graphics.*</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Return value</strong></td>
<td style="text-align: left;"><a href="../../../api/type/Mask/index.html">Mask</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Revision</strong></td>
<td style="text-align: left;"><a href="https://solar2d.com/download/">Release 2024.3703</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Keywords</strong></td>
<td style="text-align: left;">image mask, masking, clipping, bit mask</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>See also</strong></td>
<td style="text-align: left;"><a href="../../../guide/media/imageMask/index.html">Masking Images</a> <em>(guide)</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../../api/type/DisplayObject/setMask.html">object:setMask()</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../../api/type/DisplayObject/isHitTestMasked.html">object.isHitTestMasked</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../../api/type/DisplayObject/maskScaleX.html">object.maskScaleX</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../../api/type/DisplayObject/maskScaleY.html">object.maskScaleY</a></td>
</tr>
</tbody>
</table>
</blockquote>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>Creates a bit mask from an image file. The image is converted internally to grayscale. The white pixels of the bit mask allow the covered image to be visible, while black pixels hide (mask) the covered image. The area outside of the mask must be filled with black pixels which mask off the area outside the mask image.</p>
<p>The function returns a <a href="../../../api/type/Mask/index.html">Mask</a> object that can be applied to any display object using <a href="../../../api/type/DisplayObject/setMask.html">object:setMask()</a>.</p>
<p>For a walkthrough on how to use image masks, see the <a href="../../../guide/media/imageMask/index.html">Masking Images</a> guide.</p>
</section>
<section id="image-mask-requirements" class="level2">
<h2>Image Mask Requirements</h2>
<ul>
<li><p>The mask image must have width and height dimensions that are <strong>divisible by 4</strong>.</p></li>
<li><p>The mask image must be bordered by at least <strong>3 pixels</strong> of black space on all four sides. You may need to increase the overall size of your mask image to include this border.</p></li>
<li><p>If the mask image is smaller than the target image, the region outside of the mask bounds will be fully masked (transparent).</p></li>
</ul>
</section>
<section id="gotchas" class="level2">
<h2>Gotchas</h2>
<ul>
<li><p>There is a nested masking limit of 3, so care must be taken when inserting masked objects into other masked objects which act as containers, including <a href="../../../api/library/display/newContainer.html">display.newContainer</a>, <a href="../../../api/library/widget/newScrollView.html">widget.newScrollView</a>, <a href="../../../api/library/widget/newTableView.html">widget.newTableView</a>, or a masked <a href="../../../api/type/GroupObject/index.html">display group</a>. Other display objects that utilize masks include <a href="../../../api/library/display/newText.html">display.newText</a>, <a href="../../../api/library/display/newEmbossedText.html">display.newEmbossedText</a>, and any other <a href="../../../api/type/Mask/index.html">masked</a> display object. For example, a text object (one mask) inside a container (one mask) inside yet another container (one mask) would reach but not exceed the limit of 3 nested masks.</p></li>
<li><p>Currently, mask images are not dynamically selected based on the device resolution, unlike images that are displayed using <a href="../../../api/library/display/newImageRect.html">display.newImageRect()</a>. Thus, if your masks are very detailed and you need to choose a mask image of the proper resolution for different devices, you should check <a href="../../../api/library/display/imageSuffix.html">display.imageSuffix</a> and use the appropriate mask image based on its value. See the example below for more details.</p></li>
</ul>
</section>
<section id="syntax" class="level2">
<h2>Syntax</h2>
<pre class="brush: lua;">graphics.newMask( filename [, baseDir] )</pre>
<section id="filename-required" class="level5">
<h5>filename <sub><sup>(required)</sup></sub></h5>
<p><em><a href="../../../api/type/String.html">String</a>.</em> The name of the image file to create the mask from.</p>
</section>
<section id="basedir-optional" class="level5">
<h5>baseDir <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../../api/type/Constant.html">Constant</a>.</em> Specifies the directory path that contains the mask image. Can be one of the following:</p>
<ul>
<li><code>system.ResourceDirectory</code> (default)</li>
<li><code>system.DocumentsDirectory</code></li>
<li><code>system.ApplicationSupportDirectory</code></li>
<li><code>system.TemporaryDirectory</code></li>
<li><code>system.CachesDirectory</code></li>
</ul>
</section>
</section>
<section id="examples" class="level2">
<h2>Examples</h2>
<section id="mask-on-image" class="level5">
<h5>Mask on Image</h5>
<pre class="brush: lua;">-- Create and position image to be masked
local image = display.newImageRect( "image.png", 768, 1024 )
image:translate( display.contentCenterX, display.contentCenterY )
 
-- Create mask and apply to image
local mask = graphics.newMask( "circlemask.png" )
image:setMask( mask )
 
-- Transform mask
image.maskScaleX, image.maskScaleY = 2,2</pre>
</section>
<section id="mask-on-display-group" class="level5">
<h5>Mask on Display Group</h5>
<pre class="brush: lua;">local g = display.newGroup()
-- Create and position image to be masked, and insert into group
local image = display.newImageRect( g, "image.png", 768, 1024 )

-- Center the Display Group
g:translate( display.contentCenterX, display.contentCenterY )
 
local mask = graphics.newMask( "circlemask.png" )
g:setMask( mask )</pre>
</section>
<section id="dynamically-selected-mask" class="level5">
<h5>Dynamically-Selected Mask</h5>
<pre class="brush: lua;">-- This example shows how to select a different mask image based on the dynamic image suffix
-- It ensures that higher-resolution masks are used when the device resolution warrants it

-- Create and position image to be masked
local image = display.newImageRect( "image.png", 768, 1024 )
image:translate( display.contentCenterX, display.contentCenterY )

-- Create up-value reference for mask
local mask

-- Check the image suffix values and pick the correct mask
if ( display.imageSuffix == "@4x" ) then
    --print( "using @4x" )
    mask = graphics.newMask( "circlemask@4x.png" )
    image:setMask( mask )
    image.maskScaleX = 0.25
    image.maskScaleY = 0.25

elseif ( display.imageSuffix == "@2x" ) then
    --print( "using @2x" )
    mask = graphics.newMask( "circlemask@2x.png" )
    image:setMask( mask )
    image.maskScaleX = 0.5
    image.maskScaleY = 0.5

else
    --print( "using @1x" )
    mask = graphics.newMask( "circlemask.png" )
    image:setMask( mask )
end</pre>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
