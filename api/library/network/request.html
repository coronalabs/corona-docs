<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — API Reference | Libraries | network | request</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../../css/style.css" />
  <link rel="stylesheet" href="../../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../../guide/index.html">Guides</a></li>
<li><a href="../../../api/index.html">API Reference</a></li>
<li><a href="../../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../../plugin/index.html">Plugins</a></li>
<li><a href="../../../native/index.html">Solar2D Native</a></li>
<li><a href="../../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#network.request">network.request()</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#gotchas">Gotchas</a><ul>
<li><a href="#android">Android</a></li>
</ul></li>
<li><a href="#syntax">Syntax</a><ul>
<li><a href="#url-required">url <sub><sup>(required)</sup></sub></a></li>
<li><a href="#method-required">method <sub><sup>(required)</sup></sub></a></li>
<li><a href="#listener-required">listener <sub><sup>(required)</sup></sub></a></li>
<li><a href="#params-optional">params <sub><sup>(optional)</sup></sub></a></li>
</ul></li>
<li><a href="#examples">Examples</a><ul>
<li><a href="#httpsssl">HTTPS/SSL</a></li>
<li><a href="#http-post-with-custom-headers">HTTP POST with Custom Headers</a></li>
<li><a href="#download-file-with-progress-updates">Download File with Progress Updates</a></li>
<li><a href="#upload-text-file">Upload Text File</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../../api/index.html">API Reference</a>  ▸  <a href="../../../api/library/index.html">Libraries</a>  ▸  <a href="../../../api/library/network/index.html">network</a>  ▸  <a href="../../../api/library/network/request.html">request</a>
</div>
<section id="network.request" class="level1">
<h1>network.request()</h1>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Type</strong></td>
<td style="text-align: left;"><a href="../../../api/type/Function.html">Function</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Library</strong></td>
<td style="text-align: left;"><a href="../../../api/library/network/index.html">network.*</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Return value</strong></td>
<td style="text-align: left;"><a href="../../../api/type/Userdata.html">Userdata</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Revision</strong></td>
<td style="text-align: left;"><a href="https://solar2d.com/download/">Release 2024.3703</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Keywords</strong></td>
<td style="text-align: left;">asynchronous, http, https, get, post</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>See also</strong></td>
<td style="text-align: left;"><a href="../../../api/library/network/download.html">network.download()</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../../api/library/network/upload.html">network.upload()</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../../api/library/network/cancel.html">network.cancel()</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../../api/event/networkRequest/index.html">networkRequest</a></td>
</tr>
</tbody>
</table>
</blockquote>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>Makes an asynchronous HTTP or HTTPS request to a URL. This function returns a handle that can be passed to <a href="../../../api/library/network/cancel.html">network.cancel()</a> in order to cancel the request.</p>
</section>
<section id="gotchas" class="level2">
<h2>Gotchas</h2>
<ul>
<li><p>You cannot execute a network request during an <code>applicationSuspend</code> or <code>applicationExit</code> <a href="../../../api/event/system/type.html">event</a>. When your application suspends, no callbacks will fire. You can work around this by saving the request you wish to make to a file upon suspension. Then, on an <code>applicationResume</code> <a href="../../../api/event/system/type.html">event</a>, check if there is a pending request saved and, if so, execute it.</p></li>
<li><p>The <code>Content-Type</code> of requests defaults to <code>text/plain</code>. If you’re <code>POST</code>-ing form data, you must set it appropriately <nobr>(see the <a href="#HTTP_POST_with_custom_headers">example</a> below).</nobr></p></li>
<li><p>Cookies may not be handled in the same way on all devices. For example, some Android devices will require app code to handle certain web login schemes correctly, especially if they use redirects.</p></li>
<li><p>Network requests do not raise runtime errors in the event of failure so there is no need to wrap them in a Lua <code>pcall()</code> statement (errors are reported in the event sent to the network listener).</p></li>
</ul>
<section id="android" class="level3">
<h3>Android</h3>
<p>On Android, you must add the <code>INTERNET</code> permission to the <code>build.settings</code> file.</p>
<pre class="brush: lua;">settings =
{
   android =
   {
      usesPermissions =
      {
         "android.permission.INTERNET",
      },
   },
}</pre>
</section>
</section>
<section id="syntax" class="level2">
<h2>Syntax</h2>
<pre class="brush: lua;">network.request( url, method, listener [, params] )</pre>
<section id="url-required" class="level5">
<h5>url <sub><sup>(required)</sup></sub></h5>
<p><em><a href="../../../api/type/String.html">String</a>.</em> The HTTP request URL.</p>
</section>
<section id="method-required" class="level5">
<h5>method <sub><sup>(required)</sup></sub></h5>
<p><em><a href="../../../api/type/String.html">String</a>.</em> The HTTP method; acceptable values are <code>"GET"</code> (default), <code>"POST"</code>, <code>"HEAD"</code>, <code>"PUT"</code>, and <code>"DELETE"</code>.</p>
</section>
<section id="listener-required" class="level5">
<h5>listener <sub><sup>(required)</sup></sub></h5>
<p><em><a href="../../../api/type/Listener.html">Listener</a>.</em> The listener function invoked at various phases of the HTTP operation. This is passed a <a href="../../../api/event/networkRequest/index.html">networkRequest</a> event.</p>
<p>The listener function can receive events of the following phases:</p>
<ul>
<li><code>"began"</code> — The first notification, contains the estimated size, if known.</li>
<li><code>"progress"</code> — An intermediate progress notification.</li>
<li><code>"ended"</code> — The final notification, when the request is finished.</li>
</ul>
<p>By default, the listener will only receive <code>"ended"</code> events. If <code>params.progress</code> (see below) is <code>"upload"</code> or <code>"download"</code>, then the listener will also receive <code>"began"</code> and <code>"progress"</code> events.</p>
<p>If the response body is directed to a file by using <code>params.response</code> and the response was successfully written to the file, <code>event.response</code> will contain a table indicating the <code>filename</code> and <code>baseDirectory</code> for the output file. If the request completes, but produces an error response, then any error response body will be provided as a string in <code>event.response</code> instead. This behavior prevents the destination file from being written/overwritten with an error response instead of the desired payload.</p>
</section>
<section id="params-optional" class="level5">
<h5>params <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../../api/type/Table.html">Table</a>.</em> A table that specifies HTTP request or response processing options, including custom request headers or body. The following keys are supported:</p>
<ul>
<li><code>headers</code> — Table specifying request header values with string keys.</li>
<li><code>body</code> — String containing the request body, or alternatively, a table containing the <code>filename</code> and optionally <code>baseDirectory</code> for a file whose contents are to be used as the request body.</li>
<li><code>bodyType</code> — String indicating whether a string request body is <code>"text"</code> or <code>"binary"</code>. Default is <code>"text"</code> if <code>params.body</code> is a string or <code>"binary"</code> if it’s a table specifying a file.</li>
<li><code>progress</code> — String value indicating the type of progess notifications desired, if any. May be <code>"upload"</code> or <code>"download"</code>. The notification phases include the <code>"began"</code> and <code>"progress"</code> phase events for the desired direction of progress. Default is <code>nil</code>, indicating that only the <code>"ended"</code> phase event is desired.</li>
<li><code>response</code> — Table value indicating that the response body should be written to a file and specify the <code>filename</code> and optionally the <code>baseDirectory</code> for the response file. If this value is not provided, the response body is provided as a string.</li>
<li><code>timeout</code> — Timeout in seconds. Default is 30 seconds.</li>
<li><code>handleRedirects</code> A boolean indicating whether automatic redirect handling (the default) is desired. Set this to <code>false</code> if you want to receive 302 responses and handle them yourself. This may be needed for certain kinds of login schemes or custom cookie handling.</li>
</ul>
<p>Note that if a <code>filename</code> table is specified in <code>params.body</code> or in <code>params.response</code>, <code>baseDirectory</code> is an optional <a href="../../../api/type/Constant.html">Constant</a> that defaults to <a href="../../../api/library/system/DocumentsDirectory.html">system.DocumentsDirectory</a>. In the case of <code>params.response</code>, <code>baseDirectory</code> cannot be set to <a href="../../../api/library/system/ResourceDirectory.html">system.ResourceDirectory</a>, since that directory is <nobr>read-only.</nobr></p>
</section>
</section>
<section id="examples" class="level2">
<h2>Examples</h2>
<section id="httpsssl" class="level5">
<h5>HTTPS/SSL</h5>
<pre class="brush: lua;">-- The following sample code contacts Google's encrypted search over SSL
-- and prints the response (in this case, the HTML source of the home page)
-- to the console.

local function networkListener( event )

    if ( event.isError ) then
        print( "Network error: ", event.response )
    else
        print ( "RESPONSE: " .. event.response )
    end
end
 
-- Access Google over SSL:
network.request( "https://encrypted.google.com", "GET", networkListener )</pre>
<p><a id="HTTP_POST_with_custom_headers"></a></p>
</section>
<section id="http-post-with-custom-headers" class="level5">
<h5>HTTP POST with Custom Headers</h5>
<pre class="brush: lua;">-- The following code demonstrates sending data via HTTP POST,
-- specifying custom request headers and request body.

local function networkListener( event )

    if ( event.isError ) then
        print( "Network error: ", event.response )
    else
        print ( "RESPONSE: " .. event.response )
    end
end

local headers = {}
 
headers["Content-Type"] = "application/x-www-form-urlencoded"
headers["Accept-Language"] = "en-US"
 
local body = "color=red&size=small"

local params = {}
params.headers = headers
params.body = body
 
network.request( "http://127.0.0.1/formhandler.php", "POST", networkListener, params )</pre>
</section>
<section id="download-file-with-progress-updates" class="level5">
<h5>Download File with Progress Updates</h5>
<pre class="brush: lua;">-- The following code demonstrates how to download a file, with progress updates.

local function networkListener( event )
    if ( event.isError ) then
        print( "Network error: ", event.response )

    elseif ( event.phase == "began" ) then
        if ( event.bytesEstimated &lt;= 0 ) then
            print( "Download starting, size unknown" )
        else
            print( "Download starting, estimated size: " .. event.bytesEstimated )
        end

    elseif ( event.phase == "progress" ) then
        if ( event.bytesEstimated &lt;= 0 ) then
            print( "Download progress: " .. event.bytesTransferred )
        else
            print( "Download progress: " .. event.bytesTransferred .. " of estimated: " .. event.bytesEstimated )
        end
        
    elseif ( event.phase == "ended" ) then
        print( "Download complete, total bytes transferred: " .. event.bytesTransferred )
    end
end
 
local params = {}

-- Tell network.request() that we want the "began" and "progress" events:
params.progress = "download"

-- Tell network.request() that we want the output to go to a file:
params.response = {
    filename = "solar.jpg",
    baseDirectory = system.DocumentsDirectory
}
 
network.request( "https://docs.coronalabs.com/images/simulator/image-mask-base2.png", "GET", networkListener,  params )</pre>
</section>
<section id="upload-text-file" class="level5">
<h5>Upload Text File</h5>
<pre class="brush: lua;">-- The following code demonstrates an HTTP post, where the request body is text from a file.
-- This example demonstrates just one possible way to upload a file. Different web servers
-- and applications support different methods of file upload. For example, some REST services
-- support upload of a binary file in the body of a PUT request. Many web servers only allow
-- file uploads using multipart/form-encoded (text) request bodies in a POST request. If you
-- are going to attempt file upload, you must first understand the specific mechanism
-- supported by the specific web server or application that you will be working with,
-- then you must form your request data and choose your request method appropriately.

local function networkListener( event )

    if ( event.isError ) then
        print( "Network error: ", event.response )
    else
        print ( "Upload complete!" )
    end
end

local headers = {}
 
headers["Content-Type"] = "application/json"
headers["X-API-Key"] = "13b6ac91a2"
 
local params = {}
params.headers = headers

-- Tell network.request() to get the request body from a file:
params.body = {
    filename = "object.json",
    baseDirectory = system.DocumentsDirectory        
}
 
network.request( "http://127.0.0.1/restapi.php", "POST", networkListener, params )</pre>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
