<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — CoronaCards | Windows Phone 8 | portapp</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../guide/index.html">Guides</a></li>
<li><a href="../../api/index.html">API Reference</a></li>
<li><a href="../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../plugin/index.html">Plugins</a></li>
<li><a href="../../native/index.html">Solar2D Native</a></li>
<li><a href="../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#coronacards-windows-phone-8">CoronaCards — Windows Phone 8</a><ul>
<li><a href="#porting-an-existing-corona-project">Porting an Existing Corona Project</a><ul>
<li><a href="#copying-project-files">Copying Project Files</a></li>
<li><a href="#adding-app-icons">Adding App Icons</a></li>
<li><a href="#setting-the-app-orientation">Setting the App Orientation</a></li>
<li><a href="#identifying-the-platform">Identifying the Platform</a></li>
<li><a href="#back-key-support">Back Key Support</a></li>
<li><a href="#callnotification-interruption">Call/Notification Interruption</a></li>
<li><a href="#optimizing-text-performance">Optimizing Text Performance</a></li>
<li><a href="#using-embedded-fonts">Using Embedded Fonts</a></li>
<li><a href="#audio-support">Audio Support</a></li>
<li><a href="#in-app-purchases">In-App Purchases</a></li>
<li><a href="#implementing-missing-features">Implementing Missing Features</a></li>
</ul></li>
<li><a href="#section"></a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../coronacards/index.html">CoronaCards</a>  ▸  <a href="../../coronacards/wp8/index.html">Windows Phone 8</a>  ▸  <a href="../../coronacards/wp8/portapp.html">portapp</a>
</div>
<section id="coronacards-windows-phone-8" class="level1">
<h1>CoronaCards — Windows Phone 8</h1>
<section id="porting-an-existing-corona-project" class="level2">
<h2>Porting an Existing Corona Project</h2>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<p>Before porting an existing Corona project, please ensure that it uses features <a href="../../coronacards/wp8/support.html">supported</a> by CoronaCards for Windows Phone 8.</p>
</div>
<section id="copying-project-files" class="level3">
<h3>Copying Project Files</h3>
<ol type="1">
<li>In Visual Studio, view the <strong>Solution Explorer</strong> panel.</li>
<li>Expand the project’s <strong>Assets</strong> → <strong>Corona</strong> tree.</li>
<li>Open <strong>Windows Explorer</strong>, browse to the Corona project’s root folder, and select all of the files.</li>
<li>Drag-and-drop the files into the <strong>Assets</strong> → <strong>Corona</strong> tree within Visual Studio.</li>
<li>Highlight all of the Corona files within the <strong>Corona</strong> tree.</li>
<li>In the <strong>Properties</strong> panel for <strong>Build Action</strong>, select <strong>Content</strong> in the <nobr>drop-down</nobr> menu.</li>
</ol>
<div style="width:90%;">
<p><img src="../../images/simulator/cc-wp8-config3.png" /></p>
</div>
<div class="guide-notebox">
<div class="notebox-title">
Notes
</div>
<ul>
<li>If you drag-and-drop your Corona files into the project in Visual Studio, it will also copy those files into your C# project directory.</li>
<li>You do <strong>not</strong> need to include any <nobr>non-Microsoft</nobr> assets for Windows Phone development. For instance, you can omit the <code>build.settings</code> file, iOS/Android app icons, launch images, and other items which do not pertain to the Windows Phone platform.</li>
<li>Setting the <strong>Build Action</strong> of your files to <strong>Content</strong> configures Visual Studio to add those files to the compiled Windows Phone <code>.xap</code> bundle. This is necessary for file extensions that Visual Studio does not recognize, such as <code>.ttf</code>, <code>.json</code>, and other file types.</li>
</ul>
</div>
</section>
<section id="adding-app-icons" class="level3">
<h3>Adding App Icons</h3>
<p>Corona icon image files such as <code>Icon.png</code>, <code>Icon-hdpi.png</code>, etc. are <strong>not</strong> supported on Windows Phone and will be ignored. Thus, you should omit these files from your Visual Studio project’s <code>Assets\Corona</code> directory.</p>
<p>To include an app icon for Windows Phone, create a 100×100 pixel PNG image file named <code>ApplicationIcon.png</code>. When you create a new Windows Phone project in Visual Studio, a default <code>ApplicationIcon.png</code> will be automatically generated in the project’s <code>Assets</code> directory. You should edit or replace this with your custom image. Unlike iOS or Android, Windows Phone does not support multiple application icon files of different resolutions — the operating system will simply scale the main icon.</p>
<p>Windows Phone can also display a <strong>tile</strong> for your application on the start screen. When you create a new Windows Phone project in Visual Studio, default tile images are automatically created under the project’s <code>Assets\Tiles</code> directory. For more details on tile support, see Microsoft’s <a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh202948(v=vs.105).aspx">documentation</a>.</p>
</section>
<section id="setting-the-app-orientation" class="level3">
<h3>Setting the App Orientation</h3>
<p>For iOS and Android projects, you typically indicate supported orientations via the <code>build.settings</code> file. This file is <strong>not</strong> supported on Windows Phone and will be ignored. Thus, you should omit this file from your Visual Studio project’s <code>Assets\Corona</code> directory.</p>
<p>To set the orientation of a Windows Phone app, please follow these steps:</p>
<ol type="1">
<li>In Visual Studio, view the <strong>Solution Explorer</strong> panel.</li>
<li>Double click the <code>MainPage.xaml</code> file.</li>
<li>In the XML editor, click on the <code>&lt;phone:PhoneApplicationPage&gt;</code> tag’s <code>SupportedOrientation</code> attribute.</li>
<li>View the <strong>Properties</strong> panel and click on the <strong>SupportedOrientations</strong> <nobr>pull-down</nobr> box.</li>
<li>Select either <strong>Portrait</strong>, <strong>Landscape</strong>, or <strong>PortraitOrLandscape</strong>.</li>
</ol>
</section>
<section id="identifying-the-platform" class="level3">
<h3>Identifying the Platform</h3>
<p>In Lua, you can check if an app is running on Windows Phone with the following code:</p>
<pre class="brush: lua;">if ( system.getInfo("platformName") == "WinPhone" ) then
    -- This app is running on Windows Phone
end</pre>
</section>
<section id="back-key-support" class="level3">
<h3>Back Key Support</h3>
<p>Windows Phone has a “back” key just like Android devices. Pressing this key will exit the app, so you are expected to override this key and implement backward navigation within your own Corona scenes before allowing the app to exit.</p>
<pre class="brush: lua;">local function onKeyEvent( event )
    -- If the 'back' key was pressed on Android or Windows Phone, prevent it from backing out of your app
    local platformName = system.getInfo( "platformName" )
    if ( platformName == "Android" ) or ( platformName == "WinPhone" ) then
        if ( event.keyName == "back" ) then
            -- Navigate back one scene or display an 'Are you sure you want to exit' alert
            return true
        end
    end

    -- Return false to indicate that this app is *not* overriding the received key.
    -- This lets the operating system execute its default handling of this key.
    return false
end

-- Add the key event listener
Runtime:addEventListener( "key", onKeyEvent )</pre>
</section>
<section id="callnotification-interruption" class="level3">
<h3>Call/Notification Interruption</h3>
<p>The Windows Phone operating system will not automatically suspend your app when an incoming phone call is received. Instead, when a phone call occurs, Windows Phone will overlay a notification over the app, but the app will continue running. Thus, Microsoft allows developers to decide if an app should or shouldn’t suspend during a phone call. However, games are expected to suspend during a phone call and Microsoft will reject your game from the Windows Phone Store if it doesn’t suspend.</p>
<p>You can detect phone call interruption when a .NET <a href="http://msdn.microsoft.com/en-US/library/windows/apps/microsoft.phone.controls.phoneapplicationframe.obscured(v=vs.105).aspx">Obscured</a> event is raised by the operating system. However, note that this event will also be raised when a <strong>notification</strong> is received. Currently, there’s no way to differentiate between these two events, but you can handle them similarly since Windows Phone notifications obstruct a large portion of the screen and games should be suspended in both cases.</p>
<p>To suspend an app during this event, do the following:</p>
<ol type="1">
<li>In Visual Studio, view the <strong>Solution Explorer</strong> panel.</li>
<li>Double click on the <code>MainPage.xaml.cs</code> file below the <code>MainPage.xaml</code> file in the tree.</li>
<li>Edit the code as follows:</li>
</ol>
<div class="code-indent">
<pre class="brush: lua;">// [C#]

public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        // Initialize this page's components that were set up via the UI designer.
        InitializeComponent();

        // Set up Corona to automatically start up when the control's Loaded event has been raised.
        // Note: By default, Corona will run the "main.lua" file in the "Assets\Corona" directory.
        //       You can change the defaults via the CoronaPanel's AutoLaunchSettings property.
        fCoronaPanel.AutoLaunchEnabled = true;

        // Set up the CoronaPanel control to render fullscreen via the DrawingSurfaceBackgroundGrid control.
        // This significantly improves the frame rate and is the only means of achieving 60 FPS.
        fCoronaPanel.BackgroundRenderingEnabled = true;
        fDrawingSurfaceBackgroundGrid.SetBackgroundContentProvider(fCoronaPanel.BackgroundContentProvider);
        fDrawingSurfaceBackgroundGrid.SetBackgroundManipulationHandler(fCoronaPanel.BackgroundManipulationHandler);

        // Add application event handlers.
        App.RootFrame.Obscured += OnAppObscured;
        App.RootFrame.Unobscured += OnAppUnobscured;
    }

    private void OnAppObscured(object sender, ObscuredEventArgs e)
    {
        if (e.IsLocked == false)
        {
            fCoronaPanel.Runtime.Suspend();
        }
    }

    private void OnAppUnobscured(object sender, EventArgs e)
    {
        fCoronaPanel.Runtime.Resume();
    }
}</pre>
</div>
<div class="guide-notebox">
<div class="notebox-title">
Note
</div>
<p>You can simulate phone call or notification interruption via the Windows Phone emulator. This makes it easy to test and verify that the above solution is functioning properly.</p>
</div>
</section>
<section id="optimizing-text-performance" class="level3">
<h3>Optimizing Text Performance</h3>
<p>Text generation via <a href="../../api/library/display/newText.html">display.newText()</a> or <a href="../../api/library/display/newEmbossedText.html">display.newEmbossedText()</a>, and text rendering within <a href="../../api/library/widget/index.html">widgets</a>, is a slow and expensive operation on Windows Phone. This performance issue is caused by the operating system’s native text rendering APIs and it cannot be further optimized by Corona Labs.</p>
<p>One workaround for this performance issue is to use “bitmap” fonts. This involves setting up an <a href="../../api/type/ImageSheet/index.html">imageSheet</a> which contains all of the required letters/characters and then render your text via <a href="../../api/library/display/newImage.html">display.newImage()</a> or <a href="../../api/library/display/newImageRect.html">display.newImageRect()</a> objects. This will vastly improve your app’s text rendering performance, since all characters will be <nobr>pre-loaded</nobr>.</p>
<p>The following third-party bitmap font libraries may be considered:</p>
<ul>
<li><a href="http://www.bmglyph.com/corona-bitmap-font-with-graphics-2-0">bmGlyph</a></li>
<li><a href="https://github.com/autismuk/Font-Manager">Font-Manager</a></li>
<li><a href="http://www.x-pressive.com/TextCandy_Corona/features.html">TextCandy</a></li>
</ul>
<p>Note that a bitmap font library is best used for text that’s under your app’s control. This means that it shouldn’t be used for text strings taken from a source like Facebook, Twitter, or another outside source, as this text may contain special characters which are not included in your <a href="../../api/type/ImageSheet/index.html">imageSheet</a>. In these cases, using <a href="../../api/library/display/newText.html">display.newText()</a> should be acceptable, since the text will not likely be updated/changed frequently.</p>
<p>Finally, regarding widgets, the performance penalty will only occur if the widget contains text, for example text inserted into <a href="../../api/library/widget/newTableView.html">tableView</a> rows. When inserting text in this case, you should either <nobr>pre-load</nobr> text generated by <a href="../../api/library/display/newText.html">display.newText()</a> or use bitmap fonts.</p>
</section>
<section id="using-embedded-fonts" class="level3">
<h3>Using Embedded Fonts</h3>
<p>If your Corona project includes a <code>.ttf</code> or <code>.otf</code> font file which you want to utilize via <a href="../../api/library/display/newText.html">display.newText()</a> or similar, you must use the following font naming convention — this is a standard Windows Phone XAML font naming standard which Corona uses to load embedded fonts.</p>
<pre class="brush: lua;">local fontName = "&lt;MyFontNamePlusExtension>#&lt;My Font Family Name>"</pre>
<p>For example, if you copy a <strong>Times New Roman</strong> font file named <code>Times.ttf</code> into your project’s <code>Assets\Corona</code> folder, it may be displayed as follows:</p>
<pre class="brush: lua;">local myText = display.newText( "My Text", 0, 0, "Times.ttf#Times New Roman", 8 )</pre>
<p>In Windows, you can determine a <code>.ttf</code> or <code>.otf</code> file’s font family name by double clicking on it. This will display a window which reveals the font family name in the title bar or next to the <strong>Font name:</strong> field.</p>
<p>Note that Windows Phone may refuse to load some font files and default to the system font instead. If the operating system refuses to load a particular font that you’ve provided, you’ll need to use a different font file or generate a bitmap font using a bitmap font library.</p>
</section>
<section id="audio-support" class="level3">
<h3>Audio Support</h3>
<p>For audio playback on Windows Phone, CoronaCards supports the following audio file formats:</p>
<ul>
<li><code>.ogg</code> (Ogg Vorbis)</li>
<li><code>.wav</code> (16-bit uncompressed)</li>
</ul>
<p>CoronaCards for Windows Phone 8 does <strong>not</strong> support the audio <a href="../../api/type/Recording/index.html">recording</a> feature.</p>
</section>
<section id="in-app-purchases" class="level3">
<h3>In-App Purchases</h3>
<p>CoronaCards for Windows Phone 8 does not support the <a href="../../api/library/store/index.html">store</a> API and thus does not feature direct <nobr>in-app</nobr> purchase (IAP) support. However, you can implement IAP yourself via <a href="../../coronacards/wp8/communication.html">Lua/.NET Communication</a> — please inspect the example code <a href="https://github.com/olomorolo/CoronaCardsWP8_IAPguide">here</a>.</p>
</section>
<section id="implementing-missing-features" class="level3">
<h3>Implementing Missing Features</h3>
<p>If your app requires other features which are not <a href="../../coronacards/wp8/support.html">supported</a> by CoronaCards for Windows Phone 8, you may be able to implement these features yourself in .NET. Please proceed to the <a href="../../coronacards/wp8/communication.html">Lua/.NET Communication</a> guide for more details.</p>
</section>
</section>
<section id="section" class="level2">
<h2></h2>
<div class="walkthrough-nav">
<p><strong>⟨</strong> <a href="../../coronacards/wp8/index.html">Guide Index</a></p>
</div>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
