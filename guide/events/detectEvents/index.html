<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Developer Guides | Events/Listeners</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../../css/style.css" />
  <link rel="stylesheet" href="../../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../../guide/index.html">Guides</a></li>
<li><a href="../../../api/index.html">API Reference</a></li>
<li><a href="../../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../../plugin/index.html">Plugins</a></li>
<li><a href="../../../native/index.html">Solar2D Native</a></li>
<li><a href="../../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#basic-interactivity-and-event-detection">Basic Interactivity and Event Detection</a><ul>
<li><a href="#runtime-events">Runtime Events</a></li>
<li><a href="#local-events">Local Events</a></li>
<li><a href="#function-and-table-listeners">Function and Table Listeners</a></li>
<li><a href="#event-listeners">Event Listeners</a></li>
<li><a href="#registering-events">Registering Events</a></li>
<li><a href="#removing-event-listeners">Removing Event Listeners</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../../guide/index.html">Developer Guides</a>  ▸  <a href="../../../guide/events/index.html">Events/Listeners</a>
</div>
<section id="basic-interactivity-and-event-detection" class="level1">
<h1>Basic Interactivity and Event Detection</h1>
<p><strong>Events</strong> are the foundation of interactive applications in Corona. They’re used to trigger responses in your app like a tap on the screen, detection of a specific system event, completion of a timer, collision of two physical bodies, etc. Events are detected using the <a href="../../../api/type/EventDispatcher/addEventListener.html">object:addEventListener()</a> method which directs Corona to track (listen for) the associated event within a listener function. See the <a href="#registerevents">Registering Events</a> section for details.</p>
<div class="guides-toc">
<ul>
<li><a href="#basic-interactivity-and-event-detection">Basic Interactivity and Event Detection</a>
<ul>
<li><a href="#runtime-events">Runtime Events</a></li>
<li><a href="#local-events">Local Events</a></li>
<li><a href="#function-and-table-listeners">Function and Table Listeners</a></li>
<li><a href="#event-listeners">Event Listeners</a></li>
<li><a href="#registering-events">Registering Events</a></li>
<li><a href="#removing-event-listeners">Removing Event Listeners</a></li>
</ul></li>
</ul>
</div>
<p><a id="runtime"></a></p>
<section id="runtime-events" class="level2">
<h2>Runtime Events</h2>
<p><strong>Runtime events</strong> are dispatched to the global Runtime listener. These events are not directed at any particular object; rather, they are broadcast to all interested listeners. Common Runtime events include the following:</p>
<ul>
<li><p><code>enterFrame</code> events (<a href="../../../api/event/enterFrame/index.html">documentation</a>) occur at the <nobr>frames-per-second</nobr> interval of the application.</p></li>
<li><p><code>lateUpdate</code> events (<a href="../../../api/event/lateUpdate/index.html">documentation</a>) occur at the <nobr>frames-per-second</nobr> interval of the application, right after the <code>enterFrame</code> event and right before the rendering process.</p></li>
<li><p><code>system</code> events (<a href="../../../api/event/system/index.html">documentation</a>) are dispatched when certain external events occur, such as when the device suspends or exits the application.</p></li>
<li><p><code>resize</code> events (<a href="../../../api/event/resize/index.html">documentation</a>) occur when the width or height of the app’s view has been changed.</p></li>
<li><p><code>orientation</code> events (<a href="../../../api/event/orientation/index.html">documentation</a>) occur when the device orientation changes from portrait to landscape or <nobr>vice-versa</nobr>.</p></li>
<li><p><code>windowState</code> events (<a href="../../../api/event/windowState/index.html">documentation</a>) occur when the application window is sent to background or activated again (Win32 and macOS only).</p></li>
</ul>
<p>The following code shows how an app can respond to <code>system</code> events:</p>
<pre class="brush: lua;">local function onSystemEvent( event )
    
    local eventType = event.type

    if ( eventType == "applicationStart" ) then
        -- Occurs when the application is launched and all code in "main.lua" is executed
    elseif ( eventType == "applicationExit" ) then
        -- Occurs when the user or OS task manager quits the application
    elseif ( eventType == "applicationSuspend" ) then
        -- Perform all necessary actions for when the device suspends the application, i.e. during a phone call
    elseif ( eventType == "applicationResume" ) then
        -- Perform all necessary actions for when the app resumes from a suspended state
    elseif ( eventType == "applicationOpen" ) then
        -- Occurs when the application is asked to open a URL resource (Android and iOS only)
    end
end

Runtime:addEventListener( "system", onSystemEvent )</pre>
<p><a id="local"></a></p>
</section>
<section id="local-events" class="level2">
<h2>Local Events</h2>
<p><strong>Local events</strong> are typically sent to a single listener and are not broadcast to the global Runtime. Common local events include the following:</p>
<ul>
<li><p><code>tap</code> and <code>touch</code> events occur when the user touches the device screen. See the <a href="../../../guide/events/touchMultitouch/index.html">Tap/Touch/Multitouch</a> guide for more information.</p></li>
<li><p><code>collision</code> events occur when two <a href="../../../api/library/physics/index.html">physics</a> objects collide. See the <a href="../../../guide/physics/collisionDetection/index.html">Collision Detection</a> guide for more information.</p></li>
<li><p><code>timer</code> events occur when a running <a href="../../../api/event/timer/index.html">timer</a> completes its duration.</p></li>
<li><p><code>audio</code> events can be dispatched when a <a href="../../../api/event/audio/index.html">audio</a> file finishes playing. See the <a href="../../../guide/media/audioSystem/index.html">Audio Usage/Functions</a> guide for details.</p></li>
</ul>
<p>Local events vary in usage and are discussed further in their <nobr>topic-appropriate</nobr> <a href="../../../guide/index.html">guides</a> and/or the <a href="../../../api/index.html">API Reference</a>.</p>
<p><a id="functionvstable"></a></p>
</section>
<section id="function-and-table-listeners" class="level2">
<h2>Function and Table Listeners</h2>
<p>Listeners can be either functions or table/display objects.</p>
<p>When a <strong>function listener</strong> is invoked, it is passed a table representing the event:</p>
<pre class="brush: lua;">local myListener = function( event )
    print( "Listener called with event of type: " .. event.name )
end

Runtime:addEventListener( "touch", myListener )
Runtime:addEventListener( "enterFrame", myListener )</pre>
<p>Sometimes a function listener is not convenient because certain variables are not in scope when the listener is invoked. In these situations, <strong>table listeners</strong> should be used. Table listeners must have an instance method with a name corresponding to the event name:</p>
<pre class="brush: lua;">-- Assumes "myClass" and "myClass:new()" already exist

function myClass:enterFrame( event )
    print( "enterFrame called at time: " .. event.time )
end

function myClass:touch( event )
    print( "touch occurred at: " .. event.x .. "," .. event.y )
end
 
local myObject = myClass:new() 

Runtime:addEventListener( "touch", myObject )
Runtime:addEventListener( "enterFrame", myObject )</pre>
<p><a id="listeners"></a></p>
</section>
<section id="event-listeners" class="level2">
<h2>Event Listeners</h2>
<p>As illustrated in each example above, events are dispatched to <strong>event listeners</strong> which are written as basic functions. An <code>event</code> argument is always dispatched to the function.</p>
<pre class="brush: lua;">local function myTouchListener( event )

    print( "Touch X location" .. event.x )
    print( "Touch Y location" .. event.y )
end
 
local myButton = display.newRect( 100, 100, 200, 50 )
myButton:addEventListener( "touch", myTouchListener )</pre>
<p>Notice how the <code>event</code> argument passed to the <code>myTouchListener</code> function contains both <code>x</code> and <code>y</code> properties that represent the point on the screen where the touch occurred. Properties associated with the <code>event</code> argument are unique to each event type — please refer to the <a href="../../../api/event/index.html">Events</a> API documentation for details.</p>
<p><a id="registerevents"></a></p>
</section>
<section id="registering-events" class="level2">
<h2>Registering Events</h2>
<p>Events can be registered using the <a href="../../../api/type/EventDispatcher/addEventListener.html">object:addEventListener()</a> method. Just pass the string name of the event type and the name of the event listener function that should handle it.</p>
<pre class="brush: lua;">-- Standard touch listener on an object
myButton:addEventListener( "touch", myTouchListener )

-- Runtime "system" event listener
Runtime:addEventListener( "system", onSystemEvent )</pre>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<p>As shown above, two types of event listeners can be created with the <code>object:addEventListener()</code> method: listeners attached to display objects and listeners attached to the global Runtime.</p>
<p>When you create a display object and add a <strong>local</strong> touch event listener to it, you essentially <strong>point</strong> to a block of code via reference to the function. This code resides in its own memory and it persists after the display object is removed. When that occurs, there’s no way to sense future events on the object, so the local event listener is effectively removed for you. You don’t need to explicitly remove it.</p>
<p><strong>Runtime</strong> event listeners, on the other hand, <strong>must</strong> be removed when you’re finished using them. Otherwise, they’ll continue to run because the Runtime event is global. Not only will this cause a memory leak, but if any functions executing in the Runtime attempt to reference object(s) that no longer exist, the program will crash. See <a href="#remove">Removing Event Listeners</a> below for more information.</p>
</div>
<p><a id="remove"></a></p>
</section>
<section id="removing-event-listeners" class="level2">
<h2>Removing Event Listeners</h2>
<p>Most listeners, with the exception of Runtime listeners like <code>"enterFrame"</code>, will be removed automatically when the associated object is removed, for example when you call <a href="../../../api/type/DisplayObject/removeSelf.html">object:removeSelf()</a> or <a href="../../../api/library/display/remove.html">display.remove()</a>. However, you may need to explicitly remove an event listener without removing the object.</p>
<p>Removing an event listener is done using the <nobr>built-in</nobr> <a href="../../../api/type/EventDispatcher/removeEventListener.html">object:removeEventListener()</a> method.</p>
<p>This function is called in the same exact manner as <code>object:addEventListener()</code>. For example, if you want to stop listening for touch events on the <code>myButton</code> object, remove the listener as follows:</p>
<pre class="brush: lua;">myButton:removeEventListener( "touch", myTouchListener )</pre>
<p>Both the type and function name are required to remove the associated listener, because it’s possible to assign multiple listeners of the same type to a single object. For instance, you could have two (or more) different listener functions assigned to the <code>"touch"</code> event of the <code>myButton</code> display object. Therefore, when calling <code>object:removeEventListener()</code>, you need to specify the type of event you want to stop listening for, as well as the listener function that was previously assigned to that event.</p>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
