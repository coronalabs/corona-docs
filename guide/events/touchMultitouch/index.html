<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Developer Guides | Events/Listeners</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../../css/style.css" />
  <link rel="stylesheet" href="../../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../../guide/index.html">Guides</a></li>
<li><a href="../../../api/index.html">API Reference</a></li>
<li><a href="../../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../../plugin/index.html">Plugins</a></li>
<li><a href="../../../native/index.html">Solar2D Native</a></li>
<li><a href="../../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#tap-touch-multitouch">Tap / Touch / Multitouch</a><ul>
<li><a href="#tap-detection">Tap Detection</a></li>
<li><a href="#touch-detection">Touch Detection</a></li>
<li><a href="#multitouch">Multitouch</a></li>
<li><a href="#taptouch-propagation">Tap/Touch Propagation</a></li>
<li><a href="#setting-touch-focus">Setting Touch Focus</a><ul>
<li><a href="#multitouch-focus">Multitouch Focus</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../../guide/index.html">Developer Guides</a>  ▸  <a href="../../../guide/events/index.html">Events/Listeners</a>
</div>
<section id="tap-touch-multitouch" class="level1">
<h1>Tap / Touch / Multitouch</h1>
<p>This guide explains the difference between <strong>tap</strong>, <strong>touch</strong>, and <strong>multitouch</strong> and how to handle the events associated with each method.</p>
<div class="docs-tip-outer">
<div class="docs-tip-inner-left">
<div class="fa fa-cog">

</div>
</div>
<div class="docs-tip-inner-right">
<p>If you’re new to Corona and haven’t yet explored basic screen interactivity and events, please begin by reading the <a href="../../../guide/events/detectEvents/index.html">Basic Interactivity and Event Detection</a> guide.</p>
</div>
</div>
<div class="guides-toc">
<ul>
<li><a href="#tapevents">Tap Detection</a></li>
<li><a href="#touchevents">Touch Detection</a></li>
<li><a href="#multitouch">Multitouch</a></li>
<li><a href="#propagation">Tap/Touch Propagation</a></li>
<li><a href="#focus">Setting Focus</a></li>
</ul>
</div>
<p><a id="tapevents"></a></p>
<section id="tap-detection" class="level2">
<h2>Tap Detection</h2>
<p><a href="../../../api/event/tap/index.html">Tap</a> events are the most basic form of screen interactivity. Essentially, a tap is represented by the user touching the screen and lifting off at the same approximate point. The tap event is considered successful only if the user touches <strong>and</strong> releases at that point.</p>
<p>In Corona, you can listen for tap events by registering a <code>"tap"</code> event listener on most common <a href="../../../guide/media/displayObjects/index.html">display objects</a>:</p>
<pre class="brush: lua;">local function tapListener( event )

    -- Code executed when the button is tapped
    print( "Object tapped: " .. tostring(event.target) )  -- "event.target" is the tapped object
    return true
end

local myButton = display.newRect( 100, 100, 200, 50 )
myButton:addEventListener( "tap", tapListener )  -- Add a "tap" listener to the object</pre>
<p>The <code>event</code> properties returned from a tap include:</p>
<ul>
<li><p><code>event.target</code> — reference to the object that was tapped.</p></li>
<li><p><code>event.name</code> — string value of <code>"tap"</code>.</p></li>
<li><p><code>event.numTaps</code> — the number of taps on the screen. The default delay between what is considered the next tap in sequence is <code>0</code>, but this time can be adjusted with the <a href="../../../api/library/system/setTapDelay.html">system.setTapDelay()</a> function.</p></li>
<li><p><code>event.x</code> / <code>event.y</code> — the <strong>x</strong> and <strong>y</strong> position of the tap, in content coordinates.</p></li>
</ul>
<p>Unlike <a href="#touchevents">touch events</a>, the tap event does not include a <code>phase</code> property — the tap is a singular action involving both a touch and release, so you don’t need to handle the phase in any special manner.</p>
<div class="guide-notebox">
<div class="notebox-title">
Filtering Multiple Taps
</div>
<p>Using the <code>event.numTaps</code> property, you can easily determine whether an object was tapped multiple times and concurrently ignore single taps on the object. To achieve this, just ensure that <code>event.numTaps</code> is equal to <code>2</code> or higher and ignore <nobr><code>return true</code></nobr> in all other cases.</p>
<pre class="brush: lua;">local function tapListener( event )

    if ( event.numTaps == 2 ) then
        print( "Object double-tapped: " .. tostring(event.target) )
    elseif ( event.numTaps == 3 ) then
        print( "Object triple-tapped: " .. tostring(event.target) )
    else
        return true
    end
end

local myButton = display.newRect( 100, 100, 200, 50 )
myButton:addEventListener( "tap", tapListener )</pre>
</div>
<p><a id="touchevents"></a></p>
</section>
<section id="touch-detection" class="level2">
<h2>Touch Detection</h2>
<p><a href="../../../api/event/touch/index.html">Touch</a> events provide for a much greater level of screen interactivity. Using touch events, you can detect when the user first touches the screen and when the touch is lifted off the screen. You can also track the motion of the touch as it moves around the screen. To accomplish this, Corona offers the <code>event.phase</code> property in one of four states:</p>
<ul>
<li><code>"began"</code> — indicates that a touch has started on the screen.</li>
<li><code>"moved"</code> — indicates that a touch has moved on the screen.</li>
<li><code>"ended"</code> — indicates that a touch has been lifted from the screen.</li>
<li><code>"cancelled"</code> — indicates that the <strong>system</strong> cancelled tracking of the touch (not to be confused with <code>"ended"</code>).</li>
</ul>
<p>You can listen for touch events by registering a <code>"touch"</code> event listener on most common <a href="../../../guide/media/displayObjects/index.html">display objects</a>:</p>
<pre class="brush: lua;">local function myTouchListener( event )

    if ( event.phase == "began" ) then
        -- Code executed when the button is touched
        print( "object touched = " .. tostring(event.target) )  -- "event.target" is the touched object
    elseif ( event.phase == "moved" ) then
        -- Code executed when the touch is moved over the object
        print( "touch location in content coordinates = " .. event.x .. "," .. event.y )
    elseif ( event.phase == "ended" ) then
        -- Code executed when the touch lifts off the object
        print( "touch ended on object " .. tostring(event.target) )
    end
    return true  -- Prevents tap/touch propagation to underlying objects
end

local myButton = display.newRect( 100, 100, 200, 50 )
myButton:addEventListener( "touch", myTouchListener )  -- Add a "touch" listener to the object</pre>
<p>The event properties returned from a touch include:</p>
<ul>
<li><p><code>event.id</code> — a unique identifier that distinguishes between multiple touches across different touch events. See <a href="#multitouch">Multitouch</a> below for more details.</p></li>
<li><p><code>event.target</code> — reference to the object that was touched.</p></li>
<li><p><code>event.name</code> — string value of <code>"touch"</code>.</p></li>
<li><p><code>event.phase</code> — the phase of the touch as described above.</p></li>
<li><p><code>event.pressure</code> — number indicating the pressure of a touch, typically used to detect “3D Touch” events on compatible iOS devices. See the <a href="../../../api/event/touch/pressure.html">documentation</a> for more information.</p></li>
<li><p><code>event.time</code> — the time in milliseconds since the start of the application, accessible from within the touch listener function.</p></li>
<li><p><code>event.x</code> / <code>event.y</code> — the <strong>x</strong> and <strong>y</strong> position of the touch, in content coordinates.</p></li>
<li><p><code>event.xStart</code> / <code>event.yStart</code> — the <strong>x</strong> and <strong>y</strong> position of the touch from the <code>"began"</code> phase of the touch sequence, in content coordinates.</p></li>
</ul>
<p><a id="multitouch"></a></p>
</section>
<section id="multitouch" class="level2">
<h2>Multitouch</h2>
<p>Enabling <strong>multitouch</strong> in an app lets you detect and handle multiple user touches on the screen at the same time.</p>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<p>Because multitouch is <strong>disabled</strong> by default, you must first enable it via the <a href="../../../api/library/system/activate.html">system.activate()</a> function:</p>
<pre class="brush: lua;">system.activate( "multitouch" )</pre>
</div>
<div class="docs-tip-outer docs-tip-color-alert">
<div class="docs-tip-inner-left">
<div class="fa fa-exclamation-circle" style="font-size: 35px;">

</div>
</div>
<div class="docs-tip-inner-right">
<p>Multitouch functionality is only supported on actual mobile devices <nobr>(phone, tablet, etc.)</nobr> <strong>or</strong> on a system with a touchscreen running Windows 7 or higher, in which case multitouch is supported by both the Corona Simulator for Windows and <nobr>Corona-built</nobr> <a href="../../../guide/distribution/win32Build/index.html">Win32 desktop apps</a>.</p>
</div>
</div>
<p>With multitouch enabled, listen for touch events by registering a <code>"touch"</code> event listener on the object(s), exactly as described in <a href="#touchevents">Touch Detection</a> above. Then, compare the <code>event.id</code> property to determine which specific touch event sequence is being returned. For example:</p>
<pre class="brush: lua;">-- Activate multitouch
system.activate( "multitouch" )

-- Create a display object on the screen
local newRect1 = display.newRect( display.contentCenterX, display.contentCenterY, 280, 440 )
newRect1:setFillColor( 1, 0, 0.3 )

-- Touch event listener
local function touchListener( event )

    print( "Phase: " .. event.phase )
    print( "Location: " .. tostring(event.x) .. "," .. tostring(event.y) )
    print( "Unique touch ID: " .. tostring(event.id) )
    print( "----------" )
    return true
end

-- Add a touch listener to the object
newRect1:addEventListener( "touch", touchListener )</pre>
<p><a id="propagation"></a></p>
</section>
<section id="taptouch-propagation" class="level2">
<h2>Tap/Touch Propagation</h2>
<p>When the user touches the screen, the event is dispatched to the display hierarchy. Only those display objects that intersect the touch location on the screen will receive the event.</p>
<p><a href="../../../api/event/tap/index.html">Tap</a> and <a href="../../../api/event/touch/index.html">touch</a> events propagate through these objects in a particular order. By default, the first object to receive the event is the <nobr>front-most</nobr> display object in the display hierarchy that intersects the touch location. The next object to receive the event is the next object back in the hierarchy that intersects the touch location, and so on.</p>
<p>Tap and touch events propagate until they are “handled.” This means that if you have multiple objects overlaying each other in the display hierarchy, and a tap or touch event listener has been applied to each, the event will propagate through <strong>all</strong> of these objects. However, you can stop propagation to the next underlying object by telling Corona that the event has been handled. This is as simple as returning <code>true</code> from the event listener — this stops the propagation cycle and prevents any underlying objects from responding to the hit event.</p>
<pre class="brush: lua;">local function myTouchListener( event )

    if ( event.phase == "began" ) then
        -- Code executed when the button is touched
        print( "object touched = " .. tostring(event.target) )  -- "event.target" is the touched object
    end
    return true  -- Prevents tap/touch propagation to underlying objects
end

local myButton = display.newRect( 100, 100, 200, 50 )
myButton:addEventListener( "touch", myTouchListener )</pre>
<div class="docs-tip-outer">
<div class="docs-tip-inner-left">
<div class="fa fa-cog">

</div>
</div>
<div class="docs-tip-inner-right">
<p>If the tap or touch event is still not handled after traversal through the entire display hierarchy, it is broadcast as a global event to the Runtime listener.</p>
</div>
</div>
<p><a id="focus"></a></p>
</section>
<section id="setting-touch-focus" class="level2">
<h2>Setting Touch Focus</h2>
<p>You can direct all <a href="../../../api/event/touch/index.html">touch</a> events to a specific display object by setting <strong>focus</strong> on the object. This instructs the system to deliver all future touch events to that object, effectively making it “own” the first touch it receives for the lifetime of that touch.</p>
<p>Consider a typical button — if the user touches the button and, without lifting/releasing touch, slides outside the button bounds, the button probably should not trigger an action upon touch release. Similary, if the touch slides off the button and intersects another <nobr>touch-sensitive</nobr> object, you probably don’t want that object to react since the touch began on the button. Both of these cases are easily solved by setting focus on the display object.</p>
<p>To set focus on a display object, pass its object reference to <a href="../../../api/type/StageObject/setFocus.html">StageObject:setFocus()</a>. This may be <code>event.target</code> within a touch listener, or it can be any direct reference to the object itself.</p>
<p>In contrast, when you wish to <strong>release</strong> focus on the object, simply pass <code>nil</code> to <a href="../../../api/type/StageObject/setFocus.html">StageObject:setFocus()</a>:</p>
<pre class="brush: lua;">display.getCurrentStage():setFocus( nil )</pre>
<p>This example shows how you might handle focus and release of multiple objects:</p>
<pre class="brush: lua;">-- Create two display objects on the screen
local newRect1 = display.newRect( display.contentCenterX, 160, 60, 60 )
newRect1:setFillColor( 1, 0, 0.3 )
local newRect2 = display.newRect( display.contentCenterX, 320, 60, 60 )
newRect2:setFillColor( 0.3, 0, 1 )

-- Touch event listener
local function touchListener( event )

    if ( event.phase == "began" ) then
        event.target.alpha = 0.5
        -- Set focus on object
        display.getCurrentStage():setFocus( event.target )

    elseif ( event.phase == "ended" or event.phase == "cancelled" ) then
        event.target.alpha = 1
        -- Release focus on object
        display.getCurrentStage():setFocus( nil )
    end
    return true
end

-- Add a touch listener to each object
newRect1:addEventListener( "touch", touchListener )
newRect2:addEventListener( "touch", touchListener )</pre>
<section id="multitouch-focus" class="level3">
<h3>Multitouch Focus</h3>
<p>Touch focus can also be achieved when <strong>multitouch</strong> is enabled via <a href="../../../api/library/system/activate.html">system.activate()</a>. However, because there may be multiple touches on the same object, you must dedicate the first touch it receives by a unique internal identifier. This is done by passing the <code>event.id</code> property gathered from the touch listener as the second argument to <a href="../../../api/type/StageObject/setFocus.html">StageObject:setFocus()</a>:</p>
<pre class="brush: lua;">display.getCurrentStage():setFocus( event.target, event.id )</pre>
<p>Then, when you wish to <strong>release</strong> focus on the object, simply pass <code>nil</code> as the second argument to <a href="../../../api/type/StageObject/setFocus.html">StageObject:setFocus()</a>:</p>
<pre class="brush: lua;">display.getCurrentStage():setFocus( event.target, nil )</pre>
<p>This example shows how you might handle focus and release of multiple objects while multitouch is enabled:</p>
<pre class="brush: lua;">-- Activate multitouch
system.activate( "multitouch" )

-- Create two display objects on the screen
local newRect1 = display.newRect( display.contentCenterX, 160, 60, 60 )
newRect1:setFillColor( 1, 0, 0.3 )
local newRect2 = display.newRect( display.contentCenterX, 320, 60, 60 )
newRect2:setFillColor( 0.3, 0, 1 )

-- Touch event listener
local function touchListener( event )

    print( "Unique touch ID: " .. tostring(event.id) )

    if ( event.phase == "began" ) then
        event.target.alpha = 0.5
        -- Set focus on object using unique touch ID
        display.getCurrentStage():setFocus( event.target, event.id )

    elseif ( event.phase == "ended" or event.phase == "cancelled" ) then
        event.target.alpha = 1
        -- Release focus on object
        display.getCurrentStage():setFocus( event.target, nil )
    end
    return true
end

-- Add a touch listener to each object
newRect1:addEventListener( "touch", touchListener )
newRect2:addEventListener( "touch", touchListener )</pre>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
