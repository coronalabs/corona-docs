<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Developer Guides | Graphics/Audio/Animation</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../guide/index.html">Guides</a></li>
<li><a href="../../api/index.html">API Reference</a></li>
<li><a href="../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../plugin/index.html">Plugins</a></li>
<li><a href="../../native/index.html">Solar2D Native</a></li>
<li><a href="../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#repeating-fills">Repeating Fills</a><ul>
<li><a href="#repeating-fill-modes">Repeating Fill Modes</a></li>
<li><a href="#applying-fills">Applying Fills</a></li>
<li><a href="#scaling-the-fill">Scaling the Fill</a></li>
<li><a href="#offsetting-the-fill">Offsetting the Fill</a></li>
<li><a href="#aligning-the-fill">Aligning the Fill</a></li>
<li><a href="#rotating-the-fill">Rotating the Fill</a></li>
<li><a href="#transitioning-the-fill">Transitioning the Fill</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../guide/index.html">Developer Guides</a>  ▸  <a href="../../guide/graphics/index.html">Graphics/Audio/Animation</a>
</div>
<section id="repeating-fills" class="level1">
<h1>Repeating Fills</h1>
<p>This guide outlines how to use <strong>repeating fills</strong>, a feature which allows a larger display object to be filled with a “tiled pattern” using either a <strong>repeat</strong> or <strong>mirrored repeat</strong> repetition mode. For each pattern, an <strong>x</strong> and <strong>y</strong> offset can be applied to the fill, and the fill can be rotated/scaled independently of the object. In addition, these fill settings can be applied either by explicit declaration or via a gradual transition to achieve a variety of animated effects.</p>
<div class="guides-toc">
<ul>
<li><a href="#fill-modes">Repeating Fill Modes</a></li>
<li><a href="#apply-fill">Applying Fills</a></li>
<li><a href="#scale-fill">Scaling the Fill</a></li>
<li><a href="#offset-fill">Offsetting the Fill</a></li>
<li><a href="#align-fill">Aligning the Fill</a></li>
<li><a href="#rotate-fill">Rotating the Fill</a></li>
<li><a href="#transition-fill">Transitioning the Fill</a></li>
</ul>
</div>
<p><a id="fill-modes"></a></p>
<section id="repeating-fill-modes" class="level2">
<h2>Repeating Fill Modes</h2>
<p>Before implementing repeating fills, the proper <strong>fill mode</strong> must be set for the particular situation. This is achieved by calling <a href="../../api/library/display/setDefault.html">display.setDefault()</a> with the <code>"textureWrapX"</code> and/or <code>"textureWrapY"</code> keys, along with one of the following <strong>wrap modes</strong>:</p>
<ul>
<li><p><code>"clampToEdge"</code> — This is the default mode; it clamps the texture to either the <strong>x</strong> or <strong>y</strong> direction. Clamped fills will <strong>not</strong> repeat in the clamped direction.</p></li>
<li><p><code>"repeat"</code> — The fill will repeat in a tiled manner across the entire span of the filled object, as if identical tiles were simply laid out in the same orientation, <nobr>side-by-side</nobr>.</p></li>
<li><p><code>"mirroredRepeat"</code> — The fill will repeat in a mirrored pattern, wherein each neighboring tile will mirror the one beside it.</p></li>
</ul>
<p>For example, considering a basic 160×128 rectangle vector object, a <strong>repeating</strong> fill along the <strong>x</strong> axis and a <strong>mirrored repeating</strong> fill along the <strong>y</strong> axis can be set as follows:</p>
<pre class="brush: lua;">local rect = display.newRect( 0, 0, 160, 128 )
rect.x, rect.y = display.contentCenterX, display.contentCenterY

display.setDefault( "textureWrapX", "repeat" )
display.setDefault( "textureWrapY", "mirroredRepeat" )</pre>
<p><a id="apply-fill"></a></p>
</section>
<section id="applying-fills" class="level2">
<h2>Applying Fills</h2>
<p>With the vector object in place and the fill mode set along both axes, it can be filled with the example 64×64 image seen here:</p>
<div style="max-width: 64px; margin-top: 12px; margin-bottom: 12px;">
<p><img src="../../images/docs/repeat-fill-0.png" /></p>
</div>
<p>Specifically, this can be done with one initial command that sets the <code>fill</code> property of the <code>rect</code> object to a Lua table containing two <nobr>key-value</nobr> pairs:</p>
<div class="float-right" style="max-width: 160px; margin-top: 14px; margin-bottom: 16px; clear: both;">
<p><img src="../../images/docs/repeat-fill-1.png" /></p>
</div>
<pre class="brush: lua;">rect.fill = { type="image", filename="logo.png" }</pre>
<p>The first of these (<code>type</code>) tells Corona to fill the object with an image, and the <code>filename</code> key instructs that fill to be performed using the <code>logo.png</code> image.</p>
<p>The result of this command is the image at right which, by default, is stretched to fill the vector rectangle’s entire width and height. Thus, using just this minimal amount of code, there is no visual repetition with the declared texture wrapping modes — but that will be addressed in the next section.</p>
<div class="docs-tip-outer docs-tip-color-alert">
<div class="docs-tip-inner-left">
<div class="fa fa-exclamation-circle" style="font-size: 35px;">

</div>
</div>
<div class="docs-tip-inner-right">
<p>When using either of the repeating fill modes <nobr>(<code>"repeat"</code> or <code>"mirroredRepeat"</code>)</nobr>, the fill image <strong>must</strong> be of <nobr>power-of-2</nobr> dimensions on both sides, for example 16, 32, 64, 128, 256, 512, etc. While images that don’t meet these specifications will fill properly in the Corona Simulator, actual devices will <strong>not</strong> honor them as valid fill images.</p>
</div>
</div>
<p><a id="scale-fill"></a></p>
</section>
<section id="scaling-the-fill" class="level2">
<h2>Scaling the Fill</h2>
<p>Obviously, filling the entire shape with one stretched image doesn’t result in a repeating fill. To get the intended visual repetition in place, <strong>scaling</strong> methods must be used on the object fill. This requires just two additional lines of code:</p>
<div class="float-right" style="max-width: 160px; margin-top: 14px; margin-bottom: 16px; clear: both;">
<p><img src="../../images/docs/repeat-fill-2.png" /></p>
</div>
<pre class="brush: lua;">rect.fill.scaleX = 0.5
rect.fill.scaleY = 0.5</pre>
<p>This scales the fill image, but unfortunately it’s still stretched — the GPU simply takes the stretched fill texture and scales it to 50% on each axis.</p>
<p>To make the fill pattern retain its 1:1 ratio across the filled object, we can use simple math to calculate the proper scaling ratios, regardless of the target object’s width and height:</p>
<pre class="brush: lua;">local scaleFactorX = 64 / rect.width
local scaleFactorY = 64 / rect.height</pre>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<p>Note that the first number in each calculation (<code>64</code>) indicates the width and height of the image used for the fill which, in this guide, is 64×64. To retain the proper 1:1 ratio for the fill, these numbers <strong>must</strong> be adjusted according to the width/height of the actual fill image being used. For example, if the fill image is 32×128, these values should be adjusted respectively as in <nobr><code>32 / rect.width</code></nobr> and <nobr><code>128 / rect.height</code></nobr>.</p>
</div>
<p>With these calculated values, the repeating fill can be properly scaled as follows:</p>
<div class="float-right" style="max-width: 160px; margin-top: 14px; margin-bottom: 16px; clear: both;">
<p><img src="../../images/docs/repeat-fill-3.png" /></p>
</div>
<pre class="brush: lua;">rect.fill.scaleX = scaleFactorX
rect.fill.scaleY = scaleFactorY</pre>
<p>The result is a 1:1 ratio for the fill repetition — meaning, the fill itself remains at its original size of 64×64 pixels, repeating within the bounds of the filled object and overflowing outside the edges as expected.</p>
<p><a id="offset-fill"></a></p>
</section>
<section id="offsetting-the-fill" class="level2">
<h2>Offsetting the Fill</h2>
<p>One common factor in the previous examples is that the fill pattern repetition is always <strong>centered</strong> within the filled object. No matter the scale, a fill “tile” will reside in the center of the object and then repeat outward in all directions, assuming neither of the axes is clamped (<code>"clampToEdge"</code>).</p>
<p>While this default centering will probably work in most cases, <strong>offsetting</strong> a fill may sometimes be required. This can be accomplished by simply adjusting the <code>x</code> and <code>y</code> values of the fill, for instance:</p>
<pre class="brush: lua;">rect.fill.x = 0.5
rect.fill.y = 0</pre>
<div class="guide-notebox">
<div class="notebox-title">
Notes
</div>
<ul>
<li><p>Instead of setting a specific pixel value for the <code>x</code> and <code>y</code> properties, a value between <code>-1</code> and <code>1</code> is required. This tells the GPU to offset the pattern by a full repetition of the fill image’s width or height. So, setting <code>0.5</code> as the <code>x</code> property will shift the pattern half of one repetition distance along the <strong>x</strong> axis.</p></li>
<li><p>Another important distinction is that setting a <strong>positive</strong> <code>x</code> value will shift the pattern to the <strong>left</strong>, while a <strong>negative</strong> <code>x</code> value will shift the object to the <strong>right</strong>. Similarly, a <strong>positive</strong> <code>y</code> value will offset the pattern <strong>upward</strong>, and a <strong>negative</strong> <code>y</code> will offset it <strong>downward</strong>.</p></li>
</ul>
</div>
<p><a id="align-fill"></a></p>
</section>
<section id="aligning-the-fill" class="level2">
<h2>Aligning the Fill</h2>
<p>Expanding on the fill offset concept, it’s sometimes necessary to <strong>align</strong> a fill to an object’s edges.</p>
<p>Since the size of the object being filled may not be evenly divisible by the fill image size, some clever calculations can be implemented to achieve consistent fill alignment:</p>
<pre class="brush: lua;">local scaleOffsetX = ( ( rect.width - 64 ) / 2 ) / 64
local scaleOffsetY = ( ( rect.height - 64 ) / 2 ) / 64</pre>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<p>Once again, the usage of (<code>64</code>) in these calculations indicates the width and height of the image used for the fill. To achieve proper alignment, these numbers <strong>must</strong> be adjusted according to the width/height of the actual fill image being used.</p>
</div>
<p>With these calculated values, the repeating fill can be properly aligned as follows:</p>
<ul>
<li>To align the fill to the <strong>left</strong> edge of the <code>rect</code> object:</li>
</ul>
<div class="code-indent" style="width: 300px;">
<pre class="brush: lua;">rect.fill.x = offsetX</pre>
</div>
<ul>
<li>To align the fill to the <strong>right</strong> edge of the <code>rect</code> object:</li>
</ul>
<div class="code-indent" style="width: 300px;">
<pre class="brush: lua;">rect.fill.x = offsetX * -1</pre>
</div>
<ul>
<li>To align the fill to the <strong>top</strong> edge of the <code>rect</code> object:</li>
</ul>
<div class="code-indent" style="width: 300px;">
<pre class="brush: lua;">rect.fill.y = offsetY</pre>
</div>
<ul>
<li>To align the fill to the <strong>bottom</strong> edge of the <code>rect</code> object:</li>
</ul>
<div class="code-indent" style="width: 300px;">
<pre class="brush: lua;">rect.fill.y = offsetY * -1</pre>
</div>
<p><a id="rotate-fill"></a></p>
</section>
<section id="rotating-the-fill" class="level2">
<h2>Rotating the Fill</h2>
<p>The final potential adjustment is to <strong>rotate</strong> the fill independently of the object:</p>
<div class="float-right" style="max-width: 160px; margin-top: 14px; margin-bottom: 16px; clear: both;">
<p><img src="../../images/docs/repeat-fill-4.png" /></p>
</div>
<pre class="brush: lua;">rect.fill.rotation = 30</pre>
<p>Fill rotation is simply performed in familiar degrees from <code>0</code> to <code>360</code>. Note that rotation is applied around the <strong>center</strong> of the filled object and cannot be set to an anchor point (fills do not respect the <code>anchorX</code> or <code>anchorY</code> properties).</p>
<p><a id="transition-fill"></a></p>
</section>
<section id="transitioning-the-fill" class="level2">
<h2>Transitioning the Fill</h2>
<p>A final powerful feature of repeating fills is the ability to <strong>transition</strong> them via basic Corona <a href="../../api/library/transition/index.html">transitions</a>. This allows you to move, rotate, or scale the fill pattern within the filled object, and independently so of any transition/movement that may be occurring on the filled object itself.</p>
<p>The key aspect in a successful fill transition is pointing to the <code>fill</code> property of the filled object as the <strong>target</strong> of the transition, in this case <code>rect.fill</code>. For instance:</p>
<pre class="brush: lua;">transition.to( rect.fill, { time=4000, x=0.5 } )</pre>
<pre class="brush: lua;">transition.to( rect.fill, { time=4000, rotation=80 } )</pre>
<pre class="brush: lua;">transition.to( rect.fill, { time=4000, scaleX=0.5, scaleY=0.4 } )</pre>
<div class="docs-tip-outer">
<div class="docs-tip-inner-left">
<div class="fa fa-cog">

</div>
</div>
<div class="docs-tip-inner-right">
<p>Note that this capability allows you to perform a variety of interesting effects upon an object, for example, a repeating pattern “flowing” slowly across the filled object in an endless cycle (<code>iterations=-1</code>):</p>
<pre class="brush: lua;">transition.to( rect.fill, { time=4000, x=rect.fill.x-1, iterations=-1 } )</pre>
</div>
</div>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
