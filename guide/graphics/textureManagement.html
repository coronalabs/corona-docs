<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Developer Guides | Graphics/Audio/Animation</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../guide/index.html">Guides</a></li>
<li><a href="../../api/index.html">API Reference</a></li>
<li><a href="../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../plugin/index.html">Plugins</a></li>
<li><a href="../../native/index.html">Solar2D Native</a></li>
<li><a href="../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#texture-loadingmanagement">Texture Loading/Management</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#creation-and-usage">Creation and Usage</a><ul>
<li><a href="#creating">Creating</a></li>
<li><a href="#usingaccessing">Using/Accessing</a></li>
<li><a href="#managing-lifetime">Managing Lifetime</a></li>
<li><a href="#texture-types">Texture Types</a></li>
</ul></li>
<li><a href="#examples">Examples</a><ul>
<li><a href="#pre-loading-images">Pre-loading Images</a></li>
<li><a href="#render-to-canvas-resource">Render to Canvas Resource</a></li>
<li><a href="#advanced-management">Advanced Management</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../guide/index.html">Developer Guides</a>  ▸  <a href="../../guide/graphics/index.html">Graphics/Audio/Animation</a>
</div>
<section id="texture-loadingmanagement" class="level1">
<h1>Texture Loading/Management</h1>
<p>This guide discusses <a href="../../api/type/TextureResource/index.html">TextureResource</a> objects which provide a handle to manually manage and access information about textures.</p>
<div class="guides-toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#usage">Creation and Usage</a></li>
<li><a href="#examples">Examples</a></li>
</ul>
</div>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Note
</div>
<p>The methods outlined in this guide are intended for <nobr>finer-grained</nobr> control of managing textures in very specific situations. For general app development, these will not be necessary, but we provide them for more advanced purposes.</p>
</div>
<p><a id="overview"></a></p>
<section id="overview" class="level2">
<h2>Overview</h2>
<p><a href="../../api/type/TextureResource/index.html">TextureResource</a> objects give you control over the lifetime of textures in memory while also providing abstraction over file names and directories. The primary purpose of these objects is to <nobr>pre-load</nobr> textures into memory so that creating display objects using them will be virtually instantaneous.</p>
<p>Essentially, when you create a <a href="../../api/type/TextureResource/index.html">TextureResource</a> object with <a href="../../api/library/graphics/newTexture.html">graphics.newTexture()</a>, a reference to the texture is retained in memory — this is similar to the reference that display objects hold if they utilize a texture. The key difference is that a texture which is <strong>not</strong> loaded as a <a href="../../api/type/TextureResource/index.html">TextureResource</a> object will be disposed/released when there are no display objects using the texture, while a texture loaded as a <a href="../../api/type/TextureResource/index.html">TextureResource</a> object will remain in memory until you explicitly release it via <a href="../../api/type/TextureResource/releaseSelf.html">object:releaseSelf()</a> or <a href="../../api/library/graphics/releaseTextures.html">graphics.releaseTextures()</a>.</p>
<p><a id="usage"></a></p>
</section>
<section id="creation-and-usage" class="level2">
<h2>Creation and Usage</h2>
<section id="creating" class="level3">
<h3>Creating</h3>
<p><a href="../../api/type/TextureResource/index.html">TextureResource</a> objects are easily created using the <a href="../../api/library/graphics/newTexture.html">graphics.newTexture()</a> method. The sole argument is a table containing the required parameters for the <a href="../../api/type/TextureResource/index.html">TextureResource</a> object. For example:</p>
<pre class="brush: lua;">local texture = graphics.newTexture( { type="image", filename="background.png" } )</pre>
<pre class="brush: lua;">local texture = graphics.newTexture( { type="canvas", width=128, height=128 } )</pre>
<p>This code will create the texture resource object under the variable handle <code>texture</code>. Once created, you can utilize the underlying texture with various properties and methods associated with the <a href="../../api/type/TextureResource/index.html">TextureResource</a> itself.</p>
</section>
<section id="usingaccessing" class="level3">
<h3>Using/Accessing</h3>
<p>From the <a href="../../api/type/TextureResource/index.html">TextureResource</a> object, the <a href="../../api/type/TextureResource/filename.html">filename</a> and <a href="../../api/type/TextureResource/baseDir.html">baseDir</a> properties let you create images, image sheets, custom fills/strokes, and other objects which accept a file name and directory constant. For instance:</p>
<pre class="brush: lua;">-- TextureResource-based image
local background = display.newImageRect(
    texture.filename,  -- "filename" property required
    texture.baseDir,   -- "baseDir" property required
    display.contentWidth,
    display.contentHeight
)

-- TextureResource-based fill
local circle = display.newCircle( 200, 100, 50 )
circle.fill = {
    type = "image",
    filename = texture.filename,  -- "filename" property required
    baseDir = texture.baseDir     -- "baseDir" property required
}</pre>
<p>Note that these <nobr>texture-related</nobr> properties should not be used to reference the same file or directory constant in <nobr>non-texture-related</nobr> methods — for example, if you specify <code>"background.png"</code> as the <code>filename</code> for the texture, do not attempt to use <code>texture.filename</code> as a reference to the same file in <a href="../../api/library/system/pathForFile.html">system.pathForFile()</a>. Essentially, these properties refer to internal memory, not the file system.</p>
</section>
<section id="managing-lifetime" class="level3">
<h3>Managing Lifetime</h3>
<p>To prevent memory leaks, it’s important to dispose/release <a href="../../api/type/TextureResource/index.html">TextureResource</a> objects if they are no longer required. This can be done either on an individual basis or in a wider scope:</p>
<ul>
<li>Release an individual texture resource object by calling <a href="../../api/type/TextureResource/releaseSelf.html">texture:releaseSelf()</a> on the handle:</li>
</ul>
<div class="code-indent">
<pre class="brush: lua;">texture:releaseSelf()</pre>
</div>
<ul>
<li>Release all texture resource objects sharing the same <a href="../../api/type/TextureResource/type.html">type</a> property by calling <a href="../../api/library/graphics/releaseTextures.html">graphics.releaseTextures()</a>:</li>
</ul>
<div class="code-indent">
<pre class="brush: lua;">graphics.releaseTextures( { type="image" } )
graphics.releaseTextures( { type="canvas" } )</pre>
</div>
<p>Note that if any display objects are currently using the released texture, they will not be corrupted — instead, they will hold on to the texture under the hood, and if/when they are removed, the texture will be automatically disposed.</p>
</section>
<section id="texture-types" class="level3">
<h3>Texture Types</h3>
<p>Calling <a href="../../api/library/graphics/newTexture.html">graphics.newTexture()</a> actually produces objects of different types, depending on the specified <code>type</code> parameter. All types contain the shared properties/methods of <a href="../../api/type/TextureResource/index.html">TextureResource</a> plus additional properties/methods depending on the type:</p>
<ul>
<li><a href="../../api/type/TextureResourceBitmap/index.html">TextureResourceBitmap</a> — The texture resource object created by <code>type="image"</code>.</li>
<li><a href="../../api/type/TextureResourceCanvas/index.html">TextureResourceCanvas</a> — The texture resource object created by <code>type="canvas"</code>.</li>
</ul>
<p><a id="examples"></a></p>
</section>
</section>
<section id="examples" class="level2">
<h2>Examples</h2>
<section id="pre-loading-images" class="level5">
<h5>Pre-loading Images</h5>
<pre class="brush: lua;">-- This simplified example pre-loads textures into memory

-- These files are high-resolution images which may affect performance if loaded normally
local filenames = {
    "splat1.png",
    "splat2.png",
    "splat3.png",
    "splat4.png",
    "splat5.png"
}

-- Pre-load textures to memory
local textures = {}
for i = 1,#filenames do
    textures[i] = graphics.newTexture(
        {
            type = "image",
            filename = filenames[i],
            baseDir = system.ResourceDirectory
        })
    textures[i]:preload()
end

-- Sometime later, display the images
-- Because the images were pre-loaded, no performance impact will occur
local objects = {}
for i = 1,#textures do
    local texture = textures[i]
    objects[i] = display.newImageRect( texture.filename, texture.baseDir, 100, 100 )
end

-- If the textures are no longer needed, release them to prevent memory leaks
for i = 1,#textures do
    textures[i]:releaseSelf()
end
textures = {}</pre>
</section>
<section id="render-to-canvas-resource" class="level5">
<h5>Render to Canvas Resource</h5>
<pre class="brush: lua;">local tex = graphics.newTexture( { type="canvas", width=128, height=128 } )

-- Create display object with texture as contents
local rect = display.newImageRect(
    tex.filename,  -- "filename" property required
    tex.baseDir,   -- "baseDir" property required
    display.contentWidth,
    display.contentHeight
)
rect.x = display.contentCenterX
rect.y = display.contentCenterY

-- Create a circle and draw/render it to the texture
local circ = display.newCircle( 0, 0, 64 )
circ:setFillColor( { type="gradient", color1={0,0.2,1}, color2={0.8,0.8,0.8}, direction="down" } )
tex:draw( circ )

-- Schedule texture objects to be rendered to texture before next frame
tex:invalidate()</pre>
</section>
<section id="advanced-management" class="level5">
<h5>Advanced Management</h5>
<div style="margin-top: 4px;">
<p>The advanced example, available on <a href="https://github.com/coronalabs/samples-coronasdk/tree/master/Graphics/TextureLoad">GitHub</a>, downloads images from the web and has the capability to <nobr>pre-load</nobr> and release textures on runtime for optimized performance purposes.</p>
</div>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
