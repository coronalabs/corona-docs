<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Developer Guides | Graphics/Audio/Animation</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../../css/style.css" />
  <link rel="stylesheet" href="../../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../../guide/index.html">Guides</a></li>
<li><a href="../../../api/index.html">API Reference</a></li>
<li><a href="../../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../../plugin/index.html">Plugins</a></li>
<li><a href="../../../native/index.html">Solar2D Native</a></li>
<li><a href="../../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#image-sheets">Image Sheets</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#image-sheet-setup">Image Sheet Setup</a><ul>
<li><a href="#simple-options">Simple Options</a></li>
<li><a href="#complex-options">Complex Options</a></li>
<li><a href="#dynamically-selected-image-sheets">Dynamically-Selected Image Sheets</a></li>
</ul></li>
<li><a href="#displaying-images">Displaying Images</a></li>
<li><a href="#trimming-notes">Trimming Notes</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../../guide/index.html">Developer Guides</a>  ▸  <a href="../../../guide/media/index.html">Graphics/Audio/Animation</a>
</div>
<section id="image-sheets" class="level1">
<h1>Image Sheets</h1>
<p>Solar2D fully supports <strong>image sheets</strong>, sometimes referred to as sprite sheets or texture atlases. This allows you to load multiple images/frames from a single larger image file. Image sheets can be used for both static images and animated sprites. <!--- add link to sprite guide (left) --></p>
<div class="guides-toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#setup">Image Sheet Setup</a></li>
<li><a href="#display">Displaying Images</a></li>
<li><a href="#trimming">Trimming Notes</a></li>
</ul>
</div>
<p><a id="overview"></a></p>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>In mobile app design, where devices have limited texture memory, it’s often essential to conserve this memory by using image sheets. In most cases, it is more efficient to consolidate several smaller images onto one larger sheet and “pull” a particular image from the sheet when you want to display it on the screen. Solar2D offers this functionality via image sheets.</p>
<p>Image sheets are also a convenience feature. Using popular <nobr>third-party</nobr> tools like <a href="https://www.codeandweb.com/texturepacker">TexturePacker</a>, you can design your images individually and then instruct the application to consolidate several image files into one optimized image sheet.</p>
<p>For a more detailed explanation of the memory benefits of image sheets, please refer to the <a href="../../../guide/basics/optimization/index.html">Performance and Optimization</a> guide.</p>
<p><a id="setup"></a></p>
</section>
<section id="image-sheet-setup" class="level2">
<h2>Image Sheet Setup</h2>
<p>The syntax for a new image sheet requires, at minimum, the name of the file and a table of <strong>options</strong> which tells Solar2D about the images contained on the overall sheet. Depending on your needs, these options can be in “simple” format or “complex” format. If you’re using a texture packing utility like those mentioned above, this task will typically be handled for you.</p>
<p>Initializing the image sheet is done with the <a href="../../../api/library/graphics/newImageSheet.html">graphics.newImageSheet()</a> function:</p>
<pre class="brush: lua;">graphics.newImageSheet( filename, [baseDir, ] options )</pre>
<ul>
<li><p><code>filename</code> — this is the name of the image file that includes all frames of the image sheet.</p></li>
<li><p><code>baseDir</code> — specifies the base directory (<a href="../../../api/library/system/index.html">system directory constant</a>) where <code>filename</code> is located.</p></li>
<li><p><code>options</code> — a table with keys and/or sub-tables that represent specific options related to the image sheet.</p></li>
</ul>
<section id="simple-options" class="level3">
<h3>Simple Options</h3>
<p>This configuration assumes that all frames in the image sheet share identical size properties (width and height).</p>
<pre class="brush: lua;">local options =
{
    width = 50,
    height = 50,
    numFrames = 3
}
local sheet = graphics.newImageSheet( "mySheet.png", options )</pre>
</section>
<section id="complex-options" class="level3">
<h3>Complex Options</h3>
<p>This configuration is required if the image sheet has frames of varying sizes. In this configuration, <code>options</code> consists of an array of tables within a parent <code>frames</code> table. Each table in the array represents a single frame in the image sheet. For each frame, you must specify the <code>x</code> and <code>y</code> start <nobr>(upper-left corner)</nobr> along with the <code>width</code> and <code>height</code> of the frame. Taken together, these four parameters encompass the rectangular bounds of the frame.</p>
<p>For example, consider the following image sheet (<code>mySheet.png</code>) with two frames of varying width:</p>
<div class="float-right" style="float: none; margin: 10px 0px 22px 0px; color: #666; vertical-align: middle;">
<table>
<tbody>
<tr class="odd">
<td></td>
<td style="text-align: left;"><span style="line-height:30px;">232</span></td>
<td style="text-align: left;"><span style="line-height:30px;">277</span></td>
</tr>
<tr class="even">
<td><span style="margin-right:8px;">276</span></td>
<td style="text-align: left;"><img src="../../../images/simulator/image-sheets-bird0.png" /></td>
<td style="text-align: left;"><img src="../../../images/simulator/image-sheets-bird2.png" /></td>
</tr>
</tbody>
</table>
</div>
<p>The image sheet setup would look like this:</p>
<pre class="brush: lua;">local options =
{
    frames =
    {
        {   -- frame 1
            x = 0,
            y = 0,
            width = 232,
            height = 276
        },
        {   -- frame 2
            x = 232,
            y = 0,
            width = 277,
            height = 276
        }
    }
}
local sheet = graphics.newImageSheet( "mySheet.png", options )</pre>
</section>
<section id="dynamically-selected-image-sheets" class="level3">
<h3>Dynamically-Selected Image Sheets</h3>
<p>Just like individual images displayed with <a href="../../../api/library/display/newImageRect.html">display.newImageRect()</a>, image sheets may be selected dynamically depending on the screen resolution. To accomplish this, you must specify the following key-value pairs in the <code>options</code> table:</p>
<ul>
<li><code>sheetContentWidth</code></li>
<li><code>sheetContentHeight</code></li>
</ul>
<p>These values tell Solar2D the size of the original 1x image sheet. For example, if you’re developing for both iPad and iPad Retina, and you’re using an image sheet of 1000×1000 for the regular iPad, you should specify <code>1000</code> for both of these values and then design your Retina image sheet at 2000×2000.</p>
<pre class="brush: lua;">local options =
{
    width = 100,
    height = 100,
    numFrames = 10,
    sheetContentWidth = 1000,  --width of original 1x size of entire sheet
    sheetContentHeight = 1000  --height of original 1x size of entire sheet
}
local sheet = graphics.newImageSheet( "mySheet.png", options )</pre>
<p>For details on content scaling and dynamic image selection (which applies to image sheets too), please refer to the <a href="../../../guide/basics/configSettings/index.html">Project Configuration</a> guide.</p>
<p><a id="display"></a></p>
</section>
</section>
<section id="displaying-images" class="level2">
<h2>Displaying Images</h2>
<p>To display an image (frame) from an image sheet, use the existing display APIs but specify the sheet and a frame number instead of just the image name:</p>
<pre class="brush: lua;">local sheet = graphics.newImageSheet( "mySheet.png", options )

local frame1 = display.newImage( sheet, 1 )
local frame2 = display.newImage( sheet, 2 )</pre>
<p>If you require dynamically-selected images, use <a href="../../../api/library/display/newImageRect.html">display.newImageRect()</a> and specify the width and height as usual:</p>
<pre class="brush: lua;">local sheet = graphics.newImageSheet( "mySheet.png", options )

local frame1 = display.newImageRect( sheet, 1, 232, 276 )
local frame2 = display.newImageRect( sheet, 2, 277, 276 )</pre>
<p><a id="trimming"></a></p>
</section>
<section id="trimming-notes" class="level2">
<h2>Trimming Notes</h2>
<p>As noted above, popular image packing programs offer the option to maximize (compact) your image sheets. Essentially, this means that the source images will be <strong>trimmed</strong> of empty surrounding space before they’re packed into the final image sheet. These programs make intelligent use of the overall sheet dimensions and automatically arrange the images into the most efficient layout possible. For example, if you want to pack the two individual bird images into one image sheet using a packing program, the result may be as follows:</p>
<div class="float-right" style="float: none; margin: 20px 0px 20px 0px; font-size: 125%; color: #292929; vertical-align: middle;">
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="../../../images/simulator/image-sheets-bird1.png" /></td>
<td style="text-align: center;"> + </td>
<td style="text-align: left;"><img src="../../../images/simulator/image-sheets-bird2.png" /></td>
<td style="text-align: center;"> = </td>
<td style="text-align: left;"><img src="../../../images/simulator/image-sheets-bird3.png" /></td>
</tr>
</tbody>
</table>
</div>
<p>Note that the transparent space, represented by the gray checkerboard in the above examples, is trimmed off and the birds are packed closely together to achieve the smallest possible image sheet. With this change, the image sheet is now 450×262 instead of 512×276.</p>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<p>While trimming is often necessary to achieve the smallest possible image sheets, there are some important usage notes that you must be aware of, particularly in regards to positioning.</p>
<p>When you place one of these images on the screen or use them in a sprite animation, you will typically want the images to be positioned as if they were <strong>not</strong> trimmed — meaning, the empty space that was trimmed is respected, not discarded, in regards to screen positioning. This ensures that the images align properly with each other, especially in an animation where the trimmed area will often vary per frame.</p>
<p>Solar2D manages this with some additional parameters in the image sheet setup. These include <code>sourceX</code>, <code>sourceY</code>, <code>sourceWidth</code>, and <code>sourceHeight</code>. These are added to the image sheet <code>options</code> as follows:</p>
<pre class="brush: lua;">local options =
{       
    frames =
    {
        {   -- frame 1
            x = 0,
            y = 0,
            width = 203,
            height = 256,
            sourceX = 60,
            sourceY = 11,
            sourceWidth = 277,
            sourceHeight = 276
        },
        {   -- frame 2
            x = 203,
            y = 0,
            width = 247,
            height = 262,
            sourceX = 16,
            sourceY = 5,
            sourceWidth = 277,
            sourceHeight = 276
        },
    },
    sheetContentWidth = 450,
    sheetContentHeight = 262
}
local sheet = graphics.newImageSheet( "mySheet.png", options )</pre>
<div style="margin-top: 14px; margin-bottom: 4px;">
<p>Notice how in both frames, the <code>sourceWidth</code> and <code>sourceHeight</code> parameters match the size of the original, untrimmed frames. This imaginary “canvas” is what you must consider when positioning a trimmed image on the screen. Effectively, the image will be positioned in respect to the <strong>center</strong> point of the untrimmed frame size.</p>
</div>
</div>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
