<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Solar2D Native | Self-Hosted Plugins</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../guide/programming/index.html">Getting Started</a></li>
<li><a href="../guide/index.html">Guides</a></li>
<li><a href="../api/index.html">API Reference</a></li>
<li><a href="../tutorial/index.html">Tutorials</a></li>
<li><a href="../plugin/index.html">Plugins</a></li>
<li><a href="../native/index.html">Solar2D Native</a></li>
<li><a href="../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#self-hosted-plugins">Self-Hosted Plugins</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#packaging-and-hosting">Packaging and Hosting</a><ul>
<li><a href="#package-as-archives">Package as Archives</a></li>
<li><a href="#ios">iOS</a></li>
<li><a href="#android">Android</a></li>
<li><a href="#lua">Lua</a></li>
<li><a href="#web-server-requirements">Web Server Requirements</a></li>
</ul></li>
<li><a href="#solar2d-simulator-and-builds">Solar2D Simulator and Builds</a><ul>
<li><a href="#running-plugins-in-the-simulator">Running Plugins in the Simulator</a></li>
<li><a href="#device-buildssettings">Device Builds/Settings</a></li>
</ul></li>
<li><a href="#using-local-storage-instead-of-urls">Using local storage instead of URLs</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../native/index.html">Solar2D Native</a>  ▸  <a href="../native/hostedPlugin.html">Self-Hosted Plugins</a>
</div>
<section id="self-hosted-plugins" class="level1">
<h1>Self-Hosted Plugins</h1>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>Solar2D Native users can enable plugins hosted on third-party servers. This allows you to use third party plugins as well as creating plugins for internal use and leveraging Solar2D’s rapid build process with native code that you’ve written.</p>
</section>
<section id="packaging-and-hosting" class="level2">
<h2>Packaging and Hosting</h2>
<p>Plugins must be packaged for each platform <strong>separately</strong> as a <code>.tgz</code> file and hosted on a web server.</p>
<section id="package-as-archives" class="level3">
<h3>Package as Archives</h3>
<p>Follow the <a href="../native/plugin/index.html">Plugins</a> guide to build your plugin. Remember that for each support platform, a separate archive has to be packaged.</p>
</section>
<section id="ios" class="level3">
<h3>iOS</h3>
<p>Building the plugin-in to be hosted on a web server, a few simple extra steps are required:</p>
<ol type="1">
<li>Create a directory for packaging, for instance <code>package-plugin</code>. Create a folder named <code>iphone</code> within <code>package-plugin</code>.</li>
<li>Place your iOS library (<code>.a</code>) file of your plugin into that directory.</li>
<li>Any additional resources that the plugin requires are placed into a new directory named <code>resources</code>. For instance, <code>*.nib</code> files for views. If your plugin depends on other frameworks, place all the compiled frameworks underneath a directory called <code>Frameworks</code>.</li>
<li>Place the <code>metadata.lua</code> file also in the directory <code>package-plugin</code></li>
<li>Use a simple packaging script to call the zip/tar program. On Mac you could use the following lines, for instance, placed into a shell script <code>deploy.sh</code>:</li>
</ol>
<pre class="brush: lua;">#!/bin/bash
tar -czf iphone.tgz libplugin_YOUR-PLUGIN.a metadata.lua resources
scp ../iphone.tgz "youruser@www.your-web-server-where-plugin-will-be-hostd.de:/var/www/YOUR_DOMAIN/plugins"</pre>
<p>Finally, for those who will use your Self-Hosted-Plugin, they have to add the location (<code>www.YOUR_DOMAIN.com/plugins/android.tgz</code>) into their <code>build.settings</code> so that the build proccess for Solar2D Apps can find the plugin (see also below).</p>
</section>
<section id="android" class="level3">
<h3>Android</h3>
<p>Building the plugin-in to be published on a web server, a few simple extra steps are required:</p>
<ol type="1">
<li><p>Create a directory for packaging, for instance <code>package-plugin</code>. Create a folder named <code>android</code> within <code>package-plugin</code>.</p></li>
<li><p>Create a new gradle file, called <code>corona.gradle</code> and copy all your dependencies and repository definitions from your plugin’s <code>build.gradle</code> also into that file.</p></li>
<li><p>Place the <code>metadata.lua</code> file also in the directory <code>package-plugin</code></p></li>
<li><p>Use a simple packaging script to copy the build result into this directory and to call the zip/tar program. On Mac you could use the following lines, for instance, placed into a shell script <code>deploy.sh</code>:</p></li>
</ol>
<pre class="brush: lua;">#!/bin/bash
cp ../../build/outputs/aar/plugin-release.aar .
COPYFILE_DISABLE=true tar -czf ../"$(basename "$(pwd)").tgz" --exclude='.[^/]*'  ./*
scp ../android.tgz "youruser@www.your-web-server-where-plugin-will-be-hostd.de:/var/www/YOUR_DOMAIN/plugins"</pre>
<p>Finally, for those who will use your Self-Hosted-Plugin, they have to add the location (<code>www.YOUR_DOMAIN.com/plugins/android.tgz</code>) into their <code>build.settings</code> so that the build proccess for Solar2D Apps can find the plugin (see also below).</p>
</section>
<section id="lua" class="level3">
<h3>Lua</h3>
<p>The plugin needs to be stored in a flat (no directories) <code>.tgz</code> format. For example, from inside your plugin build folder, run:</p>
<pre class="brush: lua;">COPYFILE_DISABLE=true tar -czf myplugin.tgz myplugin.lua metadata.lua</pre>
</section>
<section id="web-server-requirements" class="level3">
<h3>Web Server Requirements</h3>
<p>Upload the resulting <code>.tgz</code> file to a web server that is accessible from the Internet. If necessary, <code>https://</code> and basic authentication are supported for security and access control. You can use <code>localhost</code> as web server too, since builds are local now. Note that this way machine performing the build would have to run the server.</p>
</section>
</section>
<section id="solar2d-simulator-and-builds" class="level2">
<h2>Solar2D Simulator and Builds</h2>
<section id="running-plugins-in-the-simulator" class="level3">
<h3>Running Plugins in the Simulator</h3>
<p>Solar2D Simulator only accesses hosted plugins for device builds. When it comes to running these plugins in the Simulator, you can install these plugins locally by placing the plugin file in the following directory:</p>
<pre class="brush: lua;">~/Library/Application Support/Corona/Simulator/Plugins/</pre>
<p>This file should match the name used as the key in the <code>plugins</code> table, for example <code>"plugin.hostedplugin"</code> in the <code>build.settings</code> example below.</p>
</section>
<section id="device-buildssettings" class="level3">
<h3>Device Builds/Settings</h3>
<p>In order to use hosted plugins with your Solar2D project, the following changes to <code>build.settings</code> must be made:</p>
<ol type="1">
<li>For each <strong>device</strong> platform, you must tell Solar2D the URL from which to fetch the plugin <code>.tgz</code> file.</li>
</ol>
<blockquote>
<p>In the <code>supportedPlatforms</code> table for the plugin, each platform property key’s value should contain the URL pointing to the <code>.tgz</code> plugin file.</p>
</blockquote>
<ol start="2" type="1">
<li>For each <strong>Simulator</strong> platform, you must tell Solar2D <strong>not</strong> to attempt download of a <code>.tgz</code> file or point to URL with a plugin or Lua stub.</li>
</ol>
<blockquote>
<p>In the <code>supportedPlatforms</code> table for the plugin, the <code>macos</code> and <code>win32</code> key values should be <code>false</code>. If you wish to use the plugin in the Solar2D Simulator, you can install the plugin locally as noted above or download it from the URL.</p>
</blockquote>
<p>Here is an example of including a hosted plugin within <code>build.settings</code>:</p>
<pre class="brush: lua;">settings =
{
    plugins =
    {
        ["plugin.hostedplugin"] =
        {
            publisherId = "com.company",
            supportedPlatforms = { 
                iphone = { url="https://test:abc123@example.com/plugin/iphone.tgz" },
                android = { url="https://test:abc123@example.com/plugin/android.tgz" },
                ["mac-sim"] = false,
                ["win32-sim"] = false
            },
        },
    },
}</pre>
<div class="guide-notebox">
<div class="notebox-title">
Note
</div>
<p>Note, that if no Simulator urls are there Solar2D Simulator will throw an error on launch/relaunch saying that the plugin couldn’t be downloaded. This message is safe to ignore.</p>
</div>
</section>
</section>
<section id="using-local-storage-instead-of-urls" class="level2">
<h2>Using local storage instead of URLs</h2>
<p>Local storage can be used instead of web server. To do this, rename resulting archive to <code>data.tgz</code>, and put it into <code>Solar2DPlugins/&lt;publiserId&gt;/&lt;plugin.name&gt;/&lt;platform&gt;/data.tgz</code>. The <code>Solar2DPlugins</code> can be found at <code>~/Solar2DPlugins</code> on macOS or <code>%APPDATA%\Solar2DPlugins</code> on Windows.</p>
<p>Platform can be one of:</p>
<ul>
<li><code>android</code></li>
<li><code>android-kindle</code></li>
<li><code>appletvos</code></li>
<li><code>appletvsimulator</code></li>
<li><code>html5</code></li>
<li><code>iphone</code></li>
<li><code>iphone-sim</code></li>
<li><code>mac-sim</code></li>
<li><code>macos</code></li>
<li><code>win32</code></li>
<li><code>win32-sim</code></li>
<li><code>lua</code></li>
</ul>
<p>For example, to replace <a href="../plugin/bit/index.html">bit</a> plugin for iPhone Simulator while building on macOS place archive at <code>~/Solar2DPlugins/com.coronalabs/plugin.bit/iphone-sim/data.tgz</code></p>
<p>Note that this plugins would always be used before any other type of plugins.</p>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
