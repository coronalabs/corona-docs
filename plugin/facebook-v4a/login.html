<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Plugins | Facebook (v4a) | login</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../guide/index.html">Guides</a></li>
<li><a href="../../api/index.html">API Reference</a></li>
<li><a href="../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../plugin/index.html">Plugins</a></li>
<li><a href="../../native/index.html">Solar2D Native</a></li>
<li><a href="../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#facebook.login">facebook.login()</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#syntax">Syntax</a><ul>
<li><a href="#listener-optional">listener <sub><sup>(optional)</sup></sub></a></li>
<li><a href="#permissions-optional">permissions <sub><sup>(optional)</sup></sub></a></li>
<li><a href="#limitedlogin-optional">limitedLogin <sub><sup>(optional)</sup></sub></a></li>
</ul></li>
<li><a href="#gotchas">Gotchas</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../plugin/index.html">Plugins</a>  ▸  <a href="../../plugin/facebook-v4a/index.html">Facebook (v4a)</a>  ▸  <a href="../../plugin/facebook-v4a/login.html">login</a>
</div>
<section id="facebook.login" class="level1">
<h1>facebook.login()</h1>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Type</strong></td>
<td style="text-align: left;"><a href="../../api/type/Function.html">Function</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Return value</strong></td>
<td style="text-align: left;"><a href="../../api/type/Event.html">Event</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Revision</strong></td>
<td style="text-align: left;"><a href="https://solar2d.com/download/">Release 2024.3703</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Keywords</strong></td>
<td style="text-align: left;">Facebook, login</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>See also</strong></td>
<td style="text-align: left;"><a href="../../plugin/facebook-v4a/logout.html">facebook.logout()</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../plugin/facebook-v4a/index.html">facebook.*</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../plugin/facebook-v4a/event/fbconnect/index.html">fbconnect</a></td>
</tr>
</tbody>
</table>
</blockquote>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>Prompts the user to log in to Facebook. This function can be called even if the user is already logged in. If the user is already logged in but new permissions are requested, the user will be prompted to grant the new permissions. The recommended flow is to request no permissions the first time and then ask for additional permissions as they are needed.</p>
<p>The login comes back in the form of a <a href="../../plugin/facebook-v4a/event/fbconnect/index.html">fbconnect</a> event that is sent to the listener specified within <a href="../../plugin/facebook-v4a/init.html">facebook.init()</a>, <a href="../../plugin/facebook-v4a/setFBConnectListener.html">facebook.setFBConnectListener()</a>, or this function itself.</p>
<div class="docs-tip-outer docs-tip-color-alert">
<div class="docs-tip-inner-left">
<div class="fa fa-exclamation-circle" style="font-size: 35px;">

</div>
</div>
<div class="docs-tip-inner-right">
<p>We strongly recommended that you call <a href="../../plugin/facebook-v4a/init.html">facebook.init()</a> and wait for initialization to complete <strong>before</strong> making this API call. See code below for an example implementation.</p>
</div>
</div>
</section>
<section id="syntax" class="level2">
<h2>Syntax</h2>
<pre class="brush: lua;">facebook.login( [listener] [, permissions], [, limitedLogin] )</pre>
<section id="listener-optional" class="level5">
<h5>listener <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../api/type/Listener.html">Listener</a>.</em> A listener that responds to <a href="../../plugin/facebook-v4a/event/fbconnect/index.html">fbconnect</a> events. If the listener is a table, it should have a property <code>"fbconnect"</code> that is a function.</p>
</section>
<section id="permissions-optional" class="level5">
<h5>permissions <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../api/type/Array.html">Array</a>.</em> An optional array of strings that correspond to Facebook’s publishing <a href="https://developers.facebook.com/docs/facebook-login/permissions/v2.4#reference">permissions</a>. This enables your application to ask the user to grant certain extended permissions to your app. If not supplied, no extended permissions are requested. Use <code>"publish_actions"</code> to allow posting to the user’s wall. For developer convenience, required permissions such as <code>"public_profile"</code> (<a href="https://developers.facebook.com/docs/facebook-login/permissions#reference-public_profile">reference</a>) and <code>"user_friends"</code> (<a href="https://developers.facebook.com/docs/facebook-login/permissions#reference-user_friends">reference</a>) will be automatically requested if needed.</p>
</section>
<section id="limitedlogin-optional" class="level5">
<h5>limitedLogin <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../api/type/Boolean.html">Boolean</a>.</em> default is false, using Limited Login with the app will not be used to personalize or measure advertising effectiveness. Android does not support FB Limited Login.</p>
</section>
</section>
<section id="gotchas" class="level2">
<h2>Gotchas</h2>
<ul>
<li>Both <nobr><strong>read-only</strong></nobr> and <strong>publishable</strong> permissions can be specified, but requesting both of these permission types in the same <code>facebook.login()</code> call is <strong>not</strong> allowed — if you attempt to do this, only the <nobr>read-only</nobr> permissions will be requested, for instance:</li>
</ul>
<div class="code-indent">
<pre class="brush: lua;">-- This call will only request "user_events" as it's a read-only permission
facebook.login( { "user_events", "public_actions" } )</pre>
</div>
<ul>
<li>If your app has a state where it may need to request both <nobr>read-only</nobr> and publishable permissions around the same time, you’ll need to perform this as two seperate <code>facebook.login()</code> calls, for instance:</li>
</ul>
<div class="code-indent">
<pre class="highlight: [26,41]; first-line: 1; gutter: false; brush: lua;">local facebook = require( "plugin.facebook.v4a" )

-- Check for a value inside the provided table
local function valueInTable( t, valueToFind )
    for k,v in pairs( t ) do
        if v == valueToFind then
            return true
        end
    end
    return false
end

local function genericFacebookLogin( event )
    print( event )
end

-- This listener will handle the request of read-only permissions, then request publishable permissions
local function intermediateFacebookLogin( event )

    if ( "session" == event.type ) then
        if ( "login" == event.phase ) then
            local accessToken = facebook.getCurrentAccessToken()

            -- Continue only if the user granted the read-only permissions
            if ( valueInTable( accessToken.grantedPermissions, "user_events" ) ) then
                facebook.login( genericFacebookLogin, { "publish_actions" } )
            else
                print( "The user did not grant the read-only permissions" )
            end
        end
    end
end

local function facebookListener( event )

    if ( "fbinit" == event.name ) then

        print( "Facebook initialized" )

        -- Request read-only permissions, followed by publishable permissions
        facebook.login( intermediateFacebookLogin, { "user_events" } )
    end
end

-- Set the "fbinit" listener to be triggered when initialization is complete
facebook.init( facebookListener )</pre>
</div>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
