<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Plugins | Notifications</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../guide/index.html">Guides</a></li>
<li><a href="../../api/index.html">API Reference</a></li>
<li><a href="../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../plugin/index.html">Plugins</a></li>
<li><a href="../../native/index.html">Solar2D Native</a></li>
<li><a href="../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#notifications-local-and-firebase">Notifications (local and Firebase)</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#syntax">Syntax</a></li>
<li><a href="#functions">Functions</a><ul>
<li><a href="#notifications.subscribeplugin.notifications-v2.subscribe"><span>notifications.subscribe()</span></a></li>
<li><a href="#notifications.unsubscribeplugin.notifications-v2.unsubscribe"><span>notifications.unsubscribe()</span></a></li>
<li><a href="#notifications.schedulenotificationplugin.notifications-v2.schedulenotification"><span>notifications.scheduleNotification()</span></a></li>
<li><a href="#notifications.cancelnotificationplugin.notifications-v2.cancelnotification"><span>notifications.cancelNotification()</span></a></li>
<li><a href="#notifications.getdevicetokenplugin.notifications-v2.getdevicetoken"><span>notifications.getDeviceToken()</span></a></li>
<li><a href="#notifications.registerforpushnotificationsplugin.notifications-v2.registerforpushnotifications"><span>notifications.registerForPushNotifications()</span></a></li>
</ul></li>
<li><a href="#project-settings">Project Settings</a><ul>
<li><a href="#ios">iOS</a></li>
<li><a href="#android">Android</a></li>
</ul></li>
<li><a href="#solar2d-native">Solar2D Native</a><ul>
<li><a href="#ios-1">iOS</a></li>
<li><a href="#android-1">Android</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../plugin/index.html">Plugins</a>  ▸  <a href="../../plugin/notifications-v2/index.html">Notifications</a>
</div>
<section id="notifications-local-and-firebase" class="level1">
<h1>Notifications (local and Firebase)</h1>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Type</strong></td>
<td style="text-align: left;"><a href="../../api/type/Library.html">Library</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Revision</strong></td>
<td style="text-align: left;"><a href="https://solar2d.com/download/">Release 2024.3703</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Keywords</strong></td>
<td style="text-align: left;">notification, notifications</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Platforms</strong></td>
<td style="text-align: left;">Android, iOS</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>See also</strong></td>
<td style="text-align: left;"><a href="../../guide/events/appNotification/index.html">Local/Push Notifications</a> <em>(guide)</em></td>
</tr>
</tbody>
</table>
</blockquote>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>This plugin provides access to local notifications and <a href="https://firebase.google.com">Firebase</a> push notifications.</p>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<p>For Android, all <strong>new</strong> apps, or existing apps being updated with push notifications for the first time, must use <nobr><a href="https://firebase.google.com/">Firebase</a> Cloud Messaging (FCM)</nobr>, supported by this plugin. If you have a legacy app already configured for <nobr>Google Cloud Messaging (GCM)</nobr>, it will continue to work indefinitely, but you should continue using the <a href="../../plugin/notifications/index.html">legacy</a> plugin instead of this plugin.</p>
</div>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<p>To use Firebase notifications on iOS make sure to include <code>plugin.notifications.v2.firebase</code> plugin in your <code>build.settings</code>. This plugin is identical to the <code>plugin.notifications.v2</code> and also includes libraries required to operate notification through Firebase on iOS. Note you that to use Firebase for iOS you need to configure your Firebase project with the necessary Apple Push Notfication Auth or Keys, <a href="https://firebase.google.com/docs/cloud-messaging/ios/client#upload_your_apns_authentication_key">Read More Here</a>.</p>
</div>
</section>
<section id="syntax" class="level2">
<h2>Syntax</h2>
<pre class="brush: lua;">local notifications = require( "plugin.notifications.v2" )</pre>
</section>
<section id="functions" class="level2">
<h2>Functions</h2>
<section id="notifications.subscribeplugin.notifications-v2.subscribe" class="level4">
<h4><a href="../../plugin/notifications-v2/subscribe.html">notifications.subscribe()</a></h4>
</section>
<section id="notifications.unsubscribeplugin.notifications-v2.unsubscribe" class="level4">
<h4><a href="../../plugin/notifications-v2/unsubscribe.html">notifications.unsubscribe()</a></h4>
</section>
<section id="notifications.schedulenotificationplugin.notifications-v2.schedulenotification" class="level4">
<h4><a href="../../plugin/notifications-v2/scheduleNotification.html">notifications.scheduleNotification()</a></h4>
</section>
<section id="notifications.cancelnotificationplugin.notifications-v2.cancelnotification" class="level4">
<h4><a href="../../plugin/notifications-v2/cancelNotification.html">notifications.cancelNotification()</a></h4>
</section>
<section id="notifications.getdevicetokenplugin.notifications-v2.getdevicetoken" class="level4">
<h4><a href="../../plugin/notifications-v2/getDeviceToken.html">notifications.getDeviceToken()</a></h4>
</section>
<section id="notifications.registerforpushnotificationsplugin.notifications-v2.registerforpushnotifications" class="level4">
<h4><a href="../../plugin/notifications-v2/registerForPushNotifications.html">notifications.registerForPushNotifications()</a></h4>
</section>
</section>
<section id="project-settings" class="level2">
<h2>Project Settings</h2>
<p>To use this plugin, add an entry into the <code>plugins</code> table of <code>build.settings</code>. When added, the build server will integrate the plugin during the build phase.</p>
<pre class="highlight: [5,6,7,8]; first-line: 1; gutter: false; brush: lua;">settings =
{
    plugins =
    {
        ["plugin.notifications.v2"] =
        {
            publisherId = "com.coronalabs"
        },
    },
}</pre>
<p>Or use <code>plugin.notifications.v2.firebase</code> if you plan to use Firebase on iOS.</p>
<pre class="highlight: [5,6,7,8]; first-line: 1; gutter: false; brush: lua;">settings =
{
    plugins =
    {
        ["plugin.notifications.v2.firebase"] =
        {
            publisherId = "com.coronalabs"
        },
    },
}</pre>
<section id="ios" class="level3">
<h3>iOS</h3>
<p>If your app is for iOS, you must specify what <strong>types</strong> of notifications your app will use within the <nobr><code>notification</code> → <code>iphone</code> → <code>types</code></nobr> table of <code>config.lua</code>:</p>
<pre class="highlight: [9,10,11]; first-line: 1; gutter: false; brush: lua;">application =
{
    notification =
    {
        iphone =
        {
            types =
            {
                "badge",
                "sound",
                "alert"
            },
        },
    },
}</pre>
<p>Additionally, if you want to use Google <nobr><a href="https://firebase.google.com">Firebase</a> Cloud Messaging (FCM)</nobr> for push notifications, follow these steps:</p>
<ol type="1">
<li><p>Copy <code>GoogleService-Info.plist</code>, provided in the Firebase console, to your Corona project’s root directory alongside <code>main.lua</code>.</p></li>
<li><p>Add the following entries to the <nobr><code>iphone</code> → <code>plist</code></nobr> table of <code>build.settings</code>:</p></li>
</ol>
<div class="code-indent">
<pre class="highlight: [7,8]; first-line: 1; gutter: false; brush: lua;">settings =
{
    iphone =
    {
        plist =
        {
            UIBackgroundModes = { "remote-notification" },
            FirebaseAppDelegateProxyEnabled = false,
        },
    },
}</pre>
</div>
</section>
<section id="android" class="level3">
<h3>Android</h3>
<p>If your app is for Android, you must follow these additional steps to ensure that Firebase notifications function properly:</p>
<ol type="1">
<li><p>Copy <nobr><code>google-services.json</code></nobr>, provided in the Firebase console, to your Corona project’s root directory alongside <code>main.lua</code>.</p></li>
<li><p>Add an additional <code>useGoogleServicesJson</code> entry into the <code>android</code> table of <code>build.settings</code>. When added, the build server will read the settings from the JSON file and integrate them into your app during the build phase.</p></li>
</ol>
<div class="code-indent">
<pre class="highlight: [5]; first-line: 1; gutter: false; brush: lua;">settings =
{
    android =
    {
        useGoogleServicesJson = true,
    },
}</pre>
</div>
</section>
</section>
<section id="solar2d-native" class="level2">
<h2>Solar2D Native</h2>
<section id="ios-1" class="level3">
<h3>iOS</h3>
<p>If you’re using Solar2D Native for iOS, you’ll need to add a reference to the <code>CoronaNotificationsDelegate</code> in your <code>Info.plist</code> as follows:</p>
<ol type="1">
<li><p>Add an entry to your <code>Info.plist</code> called <code>"CoronaDelegates"</code> and make it of type <code>Array</code>.</p></li>
<li><p>Add an entry to the <code>CoronaDelegates</code> array and call it <code>"CoronaNotificationsDelegate"</code>. Ensure this is of type <code>String</code>.</p></li>
</ol>
</section>
<section id="android-1" class="level3">
<h3>Android</h3>
<p>When developing natively for Android, Google wants all icons in the project’s <code>res</code> directory. This is important because Google’s Android build process generates code, creating a <code>R.java</code> file containing unique integer IDs to every resource that your project and its libraries contain. The IDs are needed to access these resources, including the notification icons.</p>
<p>When developing with Solar2D Native, you must override Corona’s notification icon resources as follows:</p>
<ol type="1">
<li><p>First, you should become familiar with how Android handles resources by reading Google’s official <a href="http://developer.android.com/guide/topics/resources/overview.html">documentation</a>.</p></li>
<li><p>Inspect the Corona library’s resource directory (<code>./Native/Corona/android/lib/Corona/res/</code>). In this directory, every <code>drawable</code> directory contains a file named <code>corona_statusbar_icon_default.png</code>. This is the image file to override. Note that this action should be an “override” and <strong>not</strong> a replacement — you should <strong>not</strong> modify the contents of the Corona library directory!</p></li>
<li><p>To override these notification image files with your own, you need to set up the Android project with the same <code>drawable</code> directories under your <code>res</code> directory. Add each <code>IconNotification*.png</code> icon to its respective <code>drawable</code> directory by resolution and version <nobr>(see <a href="../../guide/events/appNotification/index.html#android-icons">here</a>)</nobr>. You also <strong>must</strong> rename these files to <code>corona_statusbar_icon_default.png</code>.</p></li>
<li><p>Make a small change to the <code>copyCoronaResources</code> task of <nobr><code>build.gradle</code> (<code>Module: app</code>)</nobr> to ignore the notification icons provided in the Corona library project. Do this by replacing the <nobr><code>from fileTree(...)</code></nobr> line with the following:</p></li>
</ol>
<div class="code-indent">
<pre class="brush: lua;">from fileTree(dir: "$coronaEnterpriseAndroidLibDir/res", exclude: '**/corona_statusbar_icon_default.png')</pre>
</div>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
