<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Plugins | Notifications | scheduleNotification</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../guide/index.html">Guides</a></li>
<li><a href="../../api/index.html">API Reference</a></li>
<li><a href="../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../plugin/index.html">Plugins</a></li>
<li><a href="../../native/index.html">Solar2D Native</a></li>
<li><a href="../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#notifications.schedulenotification">notifications.scheduleNotification()</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#gotchas">Gotchas</a><ul>
<li><a href="#ios">iOS</a></li>
<li><a href="#android">Android</a></li>
</ul></li>
<li><a href="#syntax">Syntax</a><ul>
<li><a href="#time-required">time <sub><sup>(required)</sup></sub></a></li>
<li><a href="#options-optional">options <sub><sup>(optional)</sup></sub></a></li>
</ul></li>
<li><a href="#options-reference">Options Reference</a><ul>
<li><a href="#alert-optional">alert <sub><sup>(optional)</sup></sub></a></li>
<li><a href="#badge-optional">badge <sub><sup>(optional)</sup></sub></a></li>
<li><a href="#sound-optional">sound <sub><sup>(optional)</sup></sub></a></li>
<li><a href="#custom-optional">custom <sub><sup>(optional)</sup></sub></a></li>
</ul></li>
<li><a href="#example">Example</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../plugin/index.html">Plugins</a>  ▸  <a href="../../plugin/notifications-v2/index.html">Notifications</a>  ▸  <a href="../../plugin/notifications-v2/scheduleNotification.html">scheduleNotification</a>
</div>
<section id="notifications.schedulenotification" class="level1">
<h1>notifications.scheduleNotification()</h1>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Type</strong></td>
<td style="text-align: left;"><a href="../../api/type/Function.html">Function</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Return value</strong></td>
<td style="text-align: left;"><a href="../../api/type/Userdata.html">Userdata</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Revision</strong></td>
<td style="text-align: left;"><a href="https://solar2d.com/download/">Release 2024.3703</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Keywords</strong></td>
<td style="text-align: left;">notification, notifications, scheduleNotification</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>See also</strong></td>
<td style="text-align: left;"><a href="../../plugin/notifications-v2/cancelNotification.html">notifications.cancelNotification()</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../plugin/notifications-v2/index.html">notifications.*</a></td>
</tr>
</tbody>
</table>
</blockquote>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>Schedules a local <a href="../../api/event/notification/index.html">notification</a> event to be delivered in the future.</p>
<p>This function returns a reference ID that can be used to cancel the notification. The ID is a memory address (pointer) to an object, thus it cannot be saved and it will not be available the next time the program runs.</p>
</section>
<section id="gotchas" class="level2">
<h2>Gotchas</h2>
<section id="ios" class="level3">
<h3>iOS</h3>
<p>Scheduling a notification upon application suspend can cause the application to crash.</p>
</section>
<section id="android" class="level3">
<h3>Android</h3>
<p>Unlike iOS, local notifications on Android are managed by the application and not by the operating system. This means that all scheduled notifications and status bar notifications will be cleared when the application process terminates. However, pressing the <strong>Back</strong> key to exit the application window will not terminate the application process — this only destroys the application window which runs your project’s Lua scripts and it will receive the <code>"applicationExit"</code> <a href="../../api/event/system/type.html">system</a> event just before being destroyed. Thus, the application process will continue to run in the background — this is standard Android application behavior which allows its notifications to remain available. If the application process gets fully terminated, Corona will automatically restore all pending notifications when the application restarts.</p>
<p>This said, calling <a href="../../api/library/os/exit.html">os.exit()</a> will terminate the application process and <strong>clear</strong> all notifications. If you need to close just the application window, call <a href="../../api/library/native/requestExit.html">native.requestExit()</a> which only exits the application window and keeps the application process alive, thus keeping your notifications alive.</p>
<p>Also note that all scheduled notifications and status bar notifications will be cleared after rebooting the Android device. In order to restore all notifications, you must set the following permission in your <code>build.settings</code> file to set up your application to be started in the background after the Android device boots up:</p>
<pre class="highlight: [7]; first-line: 1; gutter: false; brush: lua;">settings =
{
    android =
    {
        usesPermissions =
        {
            "android.permission.RECEIVE_BOOT_COMPLETED",
        },
    },
}</pre>
</section>
</section>
<section id="syntax" class="level2">
<h2>Syntax</h2>
<pre class="brush: lua;">notifications.scheduleNotification( time [, options] )</pre>
<section id="time-required" class="level5">
<h5>time <sub><sup>(required)</sup></sub></h5>
<p>This parameter can be in one of two formats:</p>
<ul>
<li>A <a href="../../api/type/Number.html">number</a> indicating the number of seconds from this schedule call until delivery.</li>
<li>A <a href="../../api/type/Table.html">table</a> indicating the <strong>Coordinated Universal Time</strong> (UTC) at which to deliver the notification. This table should contain the same properties as returned by <nobr><code>os.date( "!*t" )</code></nobr>. Note that a common pitfall is to pass <code>"*t"</code> instead of <code>"!*t"</code> which results in a time given in your current time zone instead of a UTC time.</li>
</ul>
</section>
<section id="options-optional" class="level5">
<h5>options <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../api/type/Table.html">Table</a>.</em> A table that specifies details about the notification to be scheduled — see the next section for details.</p>
</section>
</section>
<section id="options-reference" class="level2">
<h2>Options Reference</h2>
<p>The <code>options</code> table contains details about the notification to be scheduled.</p>
<section id="alert-optional" class="level5">
<h5>alert <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../api/type/String.html">String</a>.</em> or <em><a href="../../api/type/Table.html">Table</a>.</em> If String notification message to be displayed to the user. If the application is not currently running, a system alert will display this message. For table, you can pass in a <code>title</code> and/or <code>body</code> for the notification.</p>
</section>
<section id="badge-optional" class="level5">
<h5>badge <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../api/type/Number.html">Number</a>.</em> The badge number to be displayed on the application icon when the scheduled notification triggers. This replaces the last badge number that was applied. Set to <code>0</code> to omit the badge number. This option is not supported on Android.</p>
</section>
<section id="sound-optional" class="level5">
<h5>sound <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../api/type/String.html">String</a>.</em> Name of the sound file in the <a href="../../api/library/system/ResourceDirectory.html">system.ResourceDirectory</a> to be played when the scheduled notification triggers. This sound is only played if the app is <strong>not</strong> currently in the foreground. On iOS, there are limitations on the kinds of sound that can be played (consult Apple’s <a href="https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/SupportingNotificationsinYourApp.html">documentation</a> for more details).</p>
</section>
<section id="custom-optional" class="level5">
<h5>custom <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../api/type/Table.html">Table</a>.</em> A table that will be delivered with the <a href="../../api/event/notification/index.html">notification</a> event. This allows you to pass custom information with the notification.</p>
</section>
</section>
<section id="example" class="level2">
<h2>Example</h2>
<pre class="brush: lua;">local notifications = require( "plugin.notifications.v2" )

-- Get the app's launch arguments in case it was started when the user tapped on a notification
local launchArgs = ...

-- Set up notification options
local options = {
    alert = "Wake up!",
    badge = 2,
    sound = "alarm.caf",
    custom = { foo = "bar" }
}

-- Schedule a notification to occur 60 seconds from now
local notification1 = notifications.scheduleNotification( 60, options )

-- Schedule a notification using Coordinated Universal Time (UTC)
local utcTime = os.date( "!*t", os.time() + 60 )
local notification2 = notifications.scheduleNotification( utcTime, options )

-- Listen for notifications
local function onNotification( event )
    print( event.name )
    if ( event.custom ) then
        print( event.custom.foo )
    end
end
Runtime:addEventListener( "notification", onNotification )

-- The launch arguments provide a notification event if this app was started when the user tapped on a notification
-- In this case, you must call the notification listener manually
if ( launchArgs and launchArgs.notification ) then
    onNotification( launchArgs.notification )
end</pre>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
