<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Plugins | On-Demand Resources</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../guide/index.html">Guides</a></li>
<li><a href="../../api/index.html">API Reference</a></li>
<li><a href="../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../plugin/index.html">Plugins</a></li>
<li><a href="../../native/index.html">Solar2D Native</a></li>
<li><a href="../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#ondemandresources.">onDemandResources.*</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#tags">Tags</a></li>
<li><a href="#gotchas">Gotchas</a></li>
<li><a href="#project-settings">Project Settings</a></li>
<li><a href="#functions">Functions</a><ul>
<li><a href="#ondemandresources.requestplugin.ondemandresources.request"><span>onDemandResources.request()</span></a></li>
<li><a href="#ondemandresources.releaseplugin.ondemandresources.release"><span>onDemandResources.release()</span></a></li>
<li><a href="#ondemandresources.progressplugin.ondemandresources.progress"><span>onDemandResources.progress()</span></a></li>
<li><a href="#ondemandresources.pauseplugin.ondemandresources.pause"><span>onDemandResources.pause()</span></a></li>
<li><a href="#ondemandresources.resumeplugin.ondemandresources.resume"><span>onDemandResources.resume()</span></a></li>
<li><a href="#ondemandresources.cancelplugin.ondemandresources.cancel"><span>onDemandResources.cancel()</span></a></li>
<li><a href="#ondemandresources.pathplugin.ondemandresources.path"><span>onDemandResources.path()</span></a></li>
<li><a href="#ondemandresources.getdownloadpriorityplugin.ondemandresources.getdownloadpriority"><span>onDemandResources.getDownloadPriority()</span></a></li>
<li><a href="#ondemandresources.setdownloadpriorityplugin.ondemandresources.setdownloadpriority"><span>onDemandResources.setDownloadPriority()</span></a></li>
<li><a href="#ondemandresources.getpreservationpriorityplugin.ondemandresources.getpreservationpriority"><span>onDemandResources.getPreservationPriority()</span></a></li>
<li><a href="#ondemandresources.setpreservationpriorityplugin.ondemandresources.setpreservationpriority"><span>onDemandResources.setPreservationPriority()</span></a></li>
<li><a href="#ondemandresources.seteventlistenerplugin.ondemandresources.seteventlistener"><span>onDemandResources.setEventListener()</span></a></li>
</ul></li>
<li><a href="#events">Events</a><ul>
<li><a href="#ondemandresourceseventplugin.ondemandresources.event.ondemandresourcesevent"><span>onDemandResourcesEvent</span></a></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../plugin/index.html">Plugins</a>  ▸  <a href="../../plugin/onDemandResources/index.html">On-Demand Resources</a>
</div>
<section id="ondemandresources." class="level1">
<h1>onDemandResources.*</h1>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Type</strong></td>
<td style="text-align: left;"><a href="../../api/type/Library.html">Library</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Revision</strong></td>
<td style="text-align: left;"><a href="https://solar2d.com/download/">Release 2024.3703</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Keywords</strong></td>
<td style="text-align: left;">on-demand resources, onDemandResources</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Platforms</strong></td>
<td style="text-align: left;">tvOS, iOS</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>See also</strong></td>
<td style="text-align: left;"><a href="../../guide/distribution/tvos/index.html">Apple TV and tvOS</a> <em>(guide)</em></td>
</tr>
</tbody>
</table>
</blockquote>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>The <a href="https://marketplace.coronalabs.com/plugin/on-demand-resources">onDemandResources</a> plugin provides an interface for Apple’s <a href="https://developer.apple.com/library/tvos/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/">on-demand resources</a>, applicable to tvOS.</p>
<p>Usage of <nobr>on-demand</nobr> resources can be essential for developing tvOS games and apps since there is a <a href="https://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/PlatformSizesforOn-DemandResources.html">limit</a> of 200 MB for the app bundle.</p>
<p>Essentially, <nobr>on-demand</nobr> resources allow you to split your app into parts and download specific assets/resources when you require them. This technique can also be utilized to minimize the app’s initial download size and reduce the footprint size in the device’s storage.</p>
</section>
<section id="tags" class="level2">
<h2>Tags</h2>
<p>When using <nobr>on-demand</nobr> resources, you should separate parts of your app into downloadable packages and reference them with <strong>tags</strong>. Each tag can point to an individual resource (file) or a group of resources (folder). By default, these resources will be excluded from the app bundle and will be available only after the app is downloaded.</p>
<p>See the <a href="#configureODR">instructions</a> below regarding configuration of <nobr>on-demand</nobr> resources/tags.</p>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<ul>
<li><p>Resources must be available before you attempt to use them. This is accomplished via <a href="../../plugin/onDemandResources/request.html">onDemandResources.request()</a> which can both check the availability of resources <strong>or</strong> download them. If the desired resources are not available, you should request their download and wait for a successful callback response before attempting to use them.</p></li>
<li><p>Once resources are successfully requested and downloaded, they can be safely accessed until the application is terminated.</p></li>
<li><p>Even though you can typically use <nobr>on-demand</nobr> resources as if they exist in your app’s bundle, they are not physically there. Use <a href="../../api/library/system/pathForFile.html">system.pathForFile()</a> to retrieve the actual path, or alternatively the convenience function <a href="../../plugin/onDemandResources/path.html">onDemandResources.path()</a>. This may be necessary when, for example, an <nobr>on-demand</nobr> resource is a text file <nobr>(not an image)</nobr> and <a href="../../api/library/io/open.html">io.open()</a> is required to open the file and read its contents (<a href="../../guide/data/readWriteFiles/index.html">guide</a>).</p></li>
</ul>
</div>
</section>
<section id="gotchas" class="level2">
<h2>Gotchas</h2>
<ul>
<li><p>You should not assign unique tags to both a folder and a nested folder within it. For example, if you assign a tag to <code>assets/images</code>, you should not assign a separate tag to <code>assets/images/level1</code> because, inherently, the <code>level1</code> resources are already included as part of the broader tag.</p></li>
<li><p>If the operating system requires storage space, it may automatically cycle through tags and evict downloaded content. By default, resources which have not been used recently will be prioritized for eviction, although you can manage eviction behavior with <a href="../../plugin/onDemandResources/setPreservationPriority.html">onDemandResources.setPreservationPriority()</a>.</p></li>
<li><p><nobr>On-demand</nobr> resources only function in distributed apps. To test functionality prior to release, use a service such as <a href="https://developer.apple.com/testflight/">TestFlight</a>.</p></li>
</ul>
</section>
<section id="project-settings" class="level2">
<h2>Project Settings</h2>
<p>To use this plugin, add an entry into the <code>plugins</code> table of <code>build.settings</code>. When added, the build server will integrate the plugin during the build phase.</p>
<pre class="highlight: [5,6,7,8]; first-line: 1; gutter: false; brush: lua;">settings =
{
    plugins =
    {
        ["plugin.onDemandResources"] =
        {
            publisherId = "com.coronalabs"
        },
    },      
}</pre>
<p><a id="configureODR"></a></p>
<div class="guide-notebox-imp">
<div class="notebox-title-imp">
Important
</div>
<p>To configure <nobr>on-demand</nobr> resources, include the <code>onDemandResources</code> table within the <code>tvos</code> and/or <code>ios</code> table of <code>build.settings</code>. This table should consist of a series of entries (<a href="../../api/type/Table.html">tables</a>) which define the packages for <nobr>on-demand</nobr> resources. Each of these tables must include a required <code>tag</code> key (<a href="../../api/type/String.html">string</a>) and a required <code>resource</code> key (<a href="../../api/type/String.html">string</a>) which can reference either a specific file or a folder containing multiple resources.</p>
<p>In addition, you can include an optional <code>type</code> key equal to either of these values:</p>
<ul>
<li><p><code>"install"</code> — These resources will be downloaded immediately when the app is downloaded from the App Store. This is useful for resources which may be required immediately when the app is first launched. In contrast to assets which are simply <nobr>pre-bundled</nobr> within your project folder for persistent availability, <nobr>on-demand</nobr> resources tagged with <code>"install"</code> may still be evicted from local storage at some point.</p></li>
<li><p><code>"prefetch"</code> — These resources will begin to download in the background immediately after the app is downloaded from the App Store.</p></li>
</ul>
<pre class="brush: lua;">settings =
{
    tvos =
    {
        onDemandResources =
        {
            { tag="introMusic", resource="intro.mp4", type="prefetch" },
            { tag="imgTutorial", resource="img/tutorial", type="install" },
            { tag="imgL1", resource="img/level1" },
        },
    },
    iphone = 
    {
        onDemandResources =
        {
            { tag="introMusic", resource="intro.mp4", type="prefetch" },
            { tag="imgTutorial", resource="img/tutorial", type="install" },
            { tag="imgL1", resource="img/level1" },
        },
    },

}</pre>
</div>
</section>
<section id="functions" class="level2">
<h2>Functions</h2>
<section id="ondemandresources.requestplugin.ondemandresources.request" class="level4">
<h4><a href="../../plugin/onDemandResources/request.html">onDemandResources.request()</a></h4>
</section>
<section id="ondemandresources.releaseplugin.ondemandresources.release" class="level4">
<h4><a href="../../plugin/onDemandResources/release.html">onDemandResources.release()</a></h4>
</section>
<section id="ondemandresources.progressplugin.ondemandresources.progress" class="level4">
<h4><a href="../../plugin/onDemandResources/progress.html">onDemandResources.progress()</a></h4>
</section>
<section id="ondemandresources.pauseplugin.ondemandresources.pause" class="level4">
<h4><a href="../../plugin/onDemandResources/pause.html">onDemandResources.pause()</a></h4>
</section>
<section id="ondemandresources.resumeplugin.ondemandresources.resume" class="level4">
<h4><a href="../../plugin/onDemandResources/resume.html">onDemandResources.resume()</a></h4>
</section>
<section id="ondemandresources.cancelplugin.ondemandresources.cancel" class="level4">
<h4><a href="../../plugin/onDemandResources/cancel.html">onDemandResources.cancel()</a></h4>
</section>
<section id="ondemandresources.pathplugin.ondemandresources.path" class="level4">
<h4><a href="../../plugin/onDemandResources/path.html">onDemandResources.path()</a></h4>
</section>
<section id="ondemandresources.getdownloadpriorityplugin.ondemandresources.getdownloadpriority" class="level4">
<h4><a href="../../plugin/onDemandResources/getDownloadPriority.html">onDemandResources.getDownloadPriority()</a></h4>
</section>
<section id="ondemandresources.setdownloadpriorityplugin.ondemandresources.setdownloadpriority" class="level4">
<h4><a href="../../plugin/onDemandResources/setDownloadPriority.html">onDemandResources.setDownloadPriority()</a></h4>
</section>
<section id="ondemandresources.getpreservationpriorityplugin.ondemandresources.getpreservationpriority" class="level4">
<h4><a href="../../plugin/onDemandResources/getPreservationPriority.html">onDemandResources.getPreservationPriority()</a></h4>
</section>
<section id="ondemandresources.setpreservationpriorityplugin.ondemandresources.setpreservationpriority" class="level4">
<h4><a href="../../plugin/onDemandResources/setPreservationPriority.html">onDemandResources.setPreservationPriority()</a></h4>
</section>
<section id="ondemandresources.seteventlistenerplugin.ondemandresources.seteventlistener" class="level4">
<h4><a href="../../plugin/onDemandResources/setEventListener.html">onDemandResources.setEventListener()</a></h4>
</section>
</section>
<section id="events" class="level2">
<h2>Events</h2>
<section id="ondemandresourceseventplugin.ondemandresources.event.ondemandresourcesevent" class="level4">
<h4><a href="../../plugin/onDemandResources/event/onDemandResourcesEvent/index.html">onDemandResourcesEvent</a></h4>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
