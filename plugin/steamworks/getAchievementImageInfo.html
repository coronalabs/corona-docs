<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Plugins | Steamworks | getAchievementImageInfo</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../guide/index.html">Guides</a></li>
<li><a href="../../api/index.html">API Reference</a></li>
<li><a href="../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../plugin/index.html">Plugins</a></li>
<li><a href="../../native/index.html">Solar2D Native</a></li>
<li><a href="../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#steamworks.getachievementimageinfo">steamworks.getAchievementImageInfo()</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#gotchas">Gotchas</a></li>
<li><a href="#syntax">Syntax</a><ul>
<li><a href="#achievementname-required">achievementName <sub><sup>(required)</sup></sub></a></li>
</ul></li>
<li><a href="#example">Example</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../plugin/index.html">Plugins</a>  ▸  <a href="../../plugin/steamworks/index.html">Steamworks</a>  ▸  <a href="../../plugin/steamworks/getAchievementImageInfo.html">getAchievementImageInfo</a>
</div>
<section id="steamworks.getachievementimageinfo" class="level1">
<h1>steamworks.getAchievementImageInfo()</h1>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Type</strong></td>
<td style="text-align: left;"><a href="../../api/type/Function.html">Function</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Return value</strong></td>
<td style="text-align: left;"><a href="../../plugin/steamworks/type/ImageInfo/index.html">ImageInfo</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Revision</strong></td>
<td style="text-align: left;"><a href="https://solar2d.com/download/">Release 2024.3703</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Keywords</strong></td>
<td style="text-align: left;">steam, steamworks, achievements, getAchievementImageInfo</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>See also</strong></td>
<td style="text-align: left;"><a href="../../plugin/steamworks/newImageRect.html">steamworks.newImageRect()</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../plugin/steamworks/newTexture.html">steamworks.newTexture()</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../plugin/steamworks/index.html">steamworks.*</a></td>
</tr>
</tbody>
</table>
</blockquote>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>Returns an <a href="../../plugin/steamworks/type/ImageInfo/index.html">ImageInfo</a> object. This provides information about one achievement image such as its pixel width, pixel height, and unique image handle. This object’s <a href="../../plugin/steamworks/type/ImageInfo/imageHandle.html">imageHandle</a> property is needed to load the image via the <a href="../../plugin/steamworks/newImageRect.html">steamworks.newImageRect()</a> and <a href="../../plugin/steamworks/newTexture.html">steamworks.newTexture()</a> functions.</p>
<p>The returned <a href="../../plugin/steamworks/type/ImageInfo/index.html">ImageInfo</a> object will always reference an image matching the achievement’s current locked or unlocked state. For example, if the achievement is currently locked, then the returned <a href="../../plugin/steamworks/type/ImageInfo/index.html">ImageInfo</a> object will reference the locked achievement image. If the achievement is unlocked, then the returned <a href="../../plugin/steamworks/type/ImageInfo/index.html">ImageInfo</a> object will referenced the unlocked achievement image.</p>
</section>
<section id="gotchas" class="level2">
<h2>Gotchas</h2>
<p>This function will typically return <code>nil</code> in the following case:</p>
<ul>
<li>The first time it’s called upon application startup; however the Steam client will then cache the requested achievement image and make it immediately available upon subsequent application launches until the Steam client has been exited. That is, exiting the Steam client will clear its cached images, forcing it to <nobr>re-download</nobr> images when restarted.</li>
</ul>
<p>Additionally, this function will <strong>always</strong> return <code>nil</code> in these cases:</p>
<ul>
<li><p>An invalid achievement name was specified.</p></li>
<li><p>The <a href="../../plugin/steamworks/isLoggedOn.html">steamworks.isLoggedOn</a> property is <code>false</code>, indicating that the application is not currently connected to the Steam client.</p></li>
<li><p>The image has not yet been downloaded from Steam. In this case, an <a href="../../plugin/steamworks/event/achievementImageUpdate/index.html">achievementImageUpdate</a> event will be dispatched once downloaded.</p></li>
</ul>
</section>
<section id="syntax" class="level2">
<h2>Syntax</h2>
<pre class="brush: lua;">steamworks.getAchievementImageInfo( achievementName )</pre>
<section id="achievementname-required" class="level5">
<h5>achievementName <sub><sup>(required)</sup></sub></h5>
<p><em><a href="../../api/type/String.html">String</a>.</em> On the Steamworks website, this is the unique name of the achievement set under the <nobr><strong>API Name Progress Stat</strong></nobr> column.</p>
</section>
</section>
<section id="example" class="level2">
<h2>Example</h2>
<pre class="brush: lua;">local steamworks = require( "plugin.steamworks" )

-- Creates a new display object which will automatically be "filled" with an achievement image
-- Image will be associated with the given unique achievement name
-- Image will automatically change when achievement changes from locked to unlocked
local function newSteamAchievementImage( achievementName )

    -- Create a rectangle which we'll later fill with the achievement image
    -- Note that Steam expects you to upload 64x64 pixel achievement images
    local defaultAchievementPixelSize = 64
    local achievementImage = display.newRect(
            display.contentCenterX, display.contentCenterY,
            defaultAchievementPixelSize * display.contentScaleX,
            defaultAchievementPixelSize * display.contentScaleY )
    if ( achievementImage == nil ) then
        return nil
    end

    -- Updates the achievement display object's "fill" to show the newest image
    local function updateAchievementTexture()
        -- Attempt to fetch info about the achievement's image
        -- Note that this function is likely to return nil on app startup
        local imageInfo = steamworks.getAchievementImageInfo( achievementName )
        if ( imageInfo == nil ) then
            return
        end

        -- Load the achievement image into a new texture resource object
        local newTexture = steamworks.newTexture( imageInfo.imageHandle )
        if ( newTexture == nil ) then
            return
        end

        -- Update the display object to show the achievement image
        achievementImage.fill =
        {
            type = "image",
            filename = newTexture.filename,
            baseDir = newTexture.baseDir
        }

        -- Release the texture reference created above
        newTexture:releaseSelf()
    end

    -- Attempt to update the display object with Steam's current image, if available
    -- If not currently available, this function call will trigger Steam to download it
    -- In this case, it dispatches an "achievementImageUpdate" event to be received below
    updateAchievementTexture()

    -- Set up a listener to be called when an achievement's image/status has changed
    local function onAchievementUpdated( event )
        if ( event.achievementName == achievementName ) then
            updateAchievementTexture()
        end
    end
    steamworks.addEventListener( "achievementImageUpdate", onAchievementUpdated )
    steamworks.addEventListener( "achievementInfoUpdate", onAchievementUpdated )

    -- Set up a listener to be called when the achievement display object is being removed
    local function onFinalizing( event )
        -- Remove event listeners which were added above
        steamworks.removeEventListener( "achievementImageUpdate", onAchievementUpdated )
        steamworks.removeEventListener( "achievementInfoUpdate", onAchievementUpdated )
    end
    achievementImage:addEventListener( "finalize", onFinalizing )

    -- Return the achievement display object created above
    return achievementImage
end

-- Lock all achievements and reset all user stats on startup
-- Note that this is for testing purposes (don't do this in a published game!)
steamworks.resetUserProgress()

-- Display image of "Achievement 1"
local achievement1 = newSteamAchievementImage( "Achievement 1" )
if ( achievement1 ) then
    achievement1.x = display.contentWidth * 0.25
    achievement1.y = display.contentCenterY
    -- Add functionality to unlock achievement upon click
    function achievement1:tap( event )
        steamworks.setAchievementUnlocked( "Achievement 1" )
    end
    achievement1:addEventListener( "tap" )
end

-- Display image of "Achievement 2"
local achievement2 = newSteamAchievementImage( "Achievement 2" )
if ( achievement2 ) then
    achievement2.x = display.contentWidth * 0.75
    achievement2.y = display.contentCenterY
    -- Add functionality to unlock achievement upon click
    function achievement2:tap( event )
        steamworks.setAchievementUnlocked( "Achievement 2" )
    end
    achievement2:addEventListener( "tap" )
end</pre>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
