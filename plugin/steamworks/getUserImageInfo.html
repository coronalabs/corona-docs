<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Plugins | Steamworks | getUserImageInfo</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../guide/index.html">Guides</a></li>
<li><a href="../../api/index.html">API Reference</a></li>
<li><a href="../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../plugin/index.html">Plugins</a></li>
<li><a href="../../native/index.html">Solar2D Native</a></li>
<li><a href="../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#steamworks.getuserimageinfo">steamworks.getUserImageInfo()</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#gotchas">Gotchas</a></li>
<li><a href="#syntax">Syntax</a><ul>
<li><a href="#type-required">type <sub><sup>(required)</sup></sub></a></li>
<li><a href="#usersteamid-optional">userSteamId <sub><sup>(optional)</sup></sub></a></li>
</ul></li>
<li><a href="#example">Example</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../plugin/index.html">Plugins</a>  ▸  <a href="../../plugin/steamworks/index.html">Steamworks</a>  ▸  <a href="../../plugin/steamworks/getUserImageInfo.html">getUserImageInfo</a>
</div>
<section id="steamworks.getuserimageinfo" class="level1">
<h1>steamworks.getUserImageInfo()</h1>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Type</strong></td>
<td style="text-align: left;"><a href="../../api/type/Function.html">Function</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Return value</strong></td>
<td style="text-align: left;"><a href="../../plugin/steamworks/type/ImageInfo/index.html">ImageInfo</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Revision</strong></td>
<td style="text-align: left;"><a href="https://solar2d.com/download/">Release 2024.3703</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Keywords</strong></td>
<td style="text-align: left;">steam, steamworks, getUserImageInfo</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>See also</strong></td>
<td style="text-align: left;"><a href="../../plugin/steamworks/newImageRect.html">steamworks.newImageRect()</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../plugin/steamworks/newTexture.html">steamworks.newTexture()</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="../../plugin/steamworks/index.html">steamworks.*</a></td>
</tr>
</tbody>
</table>
</blockquote>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>Returns an <a href="../../plugin/steamworks/type/ImageInfo/index.html">ImageInfo</a> object. This provides information about one user avatar image such as its pixel width, pixel height, and unique image handle. This object’s <a href="../../plugin/steamworks/type/ImageInfo/imageHandle.html">imageHandle</a> property is needed to load the image via the <a href="../../plugin/steamworks/newImageRect.html">steamworks.newImageRect()</a> and <a href="../../plugin/steamworks/newTexture.html">steamworks.newTexture()</a> functions.</p>
</section>
<section id="gotchas" class="level2">
<h2>Gotchas</h2>
<p>This function will typically return <code>nil</code> when attempting to fetch information about a 184×184 pixel <code>"largeAvatar"</code> image. This is because the Steam client does not normally cache these large images.</p>
<p>Additionally, this function will always return <code>nil</code> in these cases:</p>
<ul>
<li>Invalid arguments were specified.</li>
<li>The <a href="../../plugin/steamworks/isLoggedOn.html">steamworks.isLoggedOn</a> property is <code>false</code>, indicating that the application is not currently connected to the Steam client.</li>
<li>The image hasn’t yet been downloaded from the Steam server. In this case, the requested image will automatically be downloaded. The result of this request will then be provided by the <a href="../../plugin/steamworks/event/userInfoUpdate/index.html">userInfoUpdate</a> event which can be received by a listener given to the <a href="../../plugin/steamworks/addEventListener.html">steamworks.addEventListener()</a> function. This event will indicate that the image has been downloaded when either the <a href="../../plugin/steamworks/event/userInfoUpdate/smallAvatarChanged.html">event.smallAvatarChanged</a>, <a href="../../plugin/steamworks/event/userInfoUpdate/mediumAvatarChanged.html">event.mediumAvatarChanged</a>, or <a href="../../plugin/steamworks/event/userInfoUpdate/largeAvatarChanged.html">event.largeAvatarChanged</a> properties are set to <code>true</code>.</li>
</ul>
</section>
<section id="syntax" class="level2">
<h2>Syntax</h2>
<pre class="brush: lua;">steamworks.getUserImageInfo( type [, userSteamId] )</pre>
<section id="type-required" class="level5">
<h5>type <sub><sup>(required)</sup></sub></h5>
<p><em><a href="../../api/type/String.html">String</a>.</em> Unique name of the image to fetch from the user. This must be one of the following:</p>
<div class="inner-table">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Type</th>
<th>Pixel Size (w×h)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>"smallAvatar"</code></td>
<td>32×32</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>"mediumAvatar"</code></td>
<td>64×64</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>"largeAvatar"</code></td>
<td>184×184</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="usersteamid-optional" class="level5">
<h5>userSteamId <sub><sup>(optional)</sup></sub></h5>
<p><em><a href="../../api/type/String.html">String</a>.</em> Unique string ID of the user. The ID will default to the current user if this argument is not provided.</p>
</section>
</section>
<section id="example" class="level2">
<h2>Example</h2>
<pre class="brush: lua;">local steamworks = require( "plugin.steamworks" )

-- Forward-reference the last displayed avatar image
local avatarImage

-- Displays the currently logged in user's avatar image
local function displaySteamUserAvatar()
    -- Fetch information about the user's medium-sized avatar image
    local imageInfo = steamworks.getUserImageInfo( "mediumAvatar" )
    if ( imageInfo == nil ) then
        -- Image is not available yet; wait for a "userInfoUpdate" event
        return
    end

    -- Display the avatar image
    local newAvatarImage = steamworks.newImageRect( imageInfo.imageHandle, 64, 64 )
    if ( newAvatarImage == nil ) then
        return
    end
    newAvatarImage.x = display.contentCenterX
    newAvatarImage.y = display.contentCenterY

    -- Remove the last displayed avatar image, if it exists
    if ( avatarImage ) then
        avatarImage:removeSelf()
    end

    -- Store a reference to the new avatar image
    avatarImage = newAvatarImage
end

-- Attempt to show the currently logged in user's avatar image on startup
-- Note that this will likely fail on the first app launch by the Steam client
displaySteamUserAvatar()

-- Called when a Steam user's information/avatar has changed
local function onSteamUserInfoUpdated( event )
    -- Display current user's medium-sized avatar if it changed or loaded for the first time
    if ( ( event.userSteamId == steamworks.userSteamId ) and event.mediumAvatarChanged ) then
        displaySteamUserAvatar()
    end
end
steamworks.addEventListener( "userInfoUpdate", onSteamUserInfoUpdated )</pre>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
