<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cousine&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="icon" type="image/ico" href="/images/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Solar2D Documentation — Tutorials | Graphics/Audio/Animation</title>
  <meta name="description" content="Solar2D lets you build games/apps for all major platforms including iOS, Android, Kindle, Apple TV, Android TV, macOS, and Windows. Get the free toolset!" />
  <link rel="stylesheet" href="../../../css/style.css" />
  <link rel="stylesheet" href="../../../css/shCoreDefault.css" />
<script src="https://corona-cdn.coronalabs.com/js/docs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9574984-14', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='https://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../../guide/programming/index.html">Getting Started</a></li>
<li><a href="../../../guide/index.html">Guides</a></li>
<li><a href="../../../api/index.html">API Reference</a></li>
<li><a href="../../../tutorial/index.html">Tutorials</a></li>
<li><a href="../../../plugin/index.html">Plugins</a></li>
<li><a href="../../../native/index.html">Solar2D Native</a></li>
<li><a href="../../../coronacards/index.html">CoronaCards</a></li>
</ul>

		<!--
		<div id="resources-link"><a href="https://coronalabs.com/resources/">Corona Resources</a></div>
		-->
	</div>
</div>

<div class="SearchBar">
  <form action="https://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" placeholder="Search" name="q" id="q" autocomplete="off" size="40" />
  <input type="submit" name="sa" value="Search" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#techniques-for-swapping-images">Techniques for Swapping Images</a><ul>
<li><a href="#image-swap">2-Image Swap</a></li>
<li><a href="#fill-swap">Fill Swap</a></li>
<li><a href="#multi-image-swap">Multi-Image Swap</a></li>
<li><a href="#image-sheets-and-sprites">Image Sheets and Sprites</a><ul>
<li><a href="#sprite-frame-swapping">Sprite Frame Swapping</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="https://docs.coronalabs.com">Documentation</a>  ▸  <a href="../../../tutorial/index.html">Tutorials</a>  ▸  <a href="../../../tutorial/media/index.html">Graphics/Audio/Animation</a>
</div>
<section id="techniques-for-swapping-images" class="level1">
<h1>Techniques for Swapping Images</h1>
<p>Sometimes, the design of an app dictates the need for “image swapping” in which the developer displays an image at a given location and then, after some time or some action, swaps that image for another. Here’s a theoretical example:</p>
<pre class="brush: lua;">local myImage = display.newImageRect( "image1.png", 64, 64 )

-- After some time or upon some event
myImage:swapImage( "image2.png" )</pre>
<p>However, this is not how Solar2D works because <code>:swapImage()</code> is <strong>not</strong> a <nobr>built-in</nobr> method. When Solar2D builds an image, it has to read the file in from the app bundle’s file system, allocate texture memory for the image, render the PNG or JPG compressed data into four color channels, and return a display object. To “swap” that image, Solar2D would need to destroy the object and create a new image, effectively resulting in the same amount of work as illustrated in this example:</p>
<pre class="brush: lua;">local myImage = display.newImageRect( "image1.png", 64, 64 )

-- After some time or upon some event
display.remove( myImage )
myImage = display.newImageRect( "image2.png", 64, 64 )</pre>
<p>In this theoretical scenario, by destroying <code>image1.png</code> with the <a href="../../../api/library/display/remove.html">display.remove()</a> call, you’re probably not planning on using it again soon. The advantage to this method is that it minimizes texture memory since only one of the two images is loaded at once. However, if you want to get the original image back, you’re caught in this cycle of image loading and unloading over and over. In itself, this is an inefficient process that can impact performance. Thus, if you need to swap images more frequently, you should explore other techniques. Let’s look at a few options:</p>
<section id="image-swap" class="level2">
<h2>2-Image Swap</h2>
<p>If you have two images, you can simply load them both, add them to a display group, and reference the images as parameters of the group. In this example, we load two images, <code>redBall</code> and <code>blueBall</code>. We then position them at the same location, making one visible and the other not.</p>
<pre class="brush: lua;">-- Create a basic display group
local imageGroup = display.newGroup()

-- Create a red ball inside the group
local redBall = display.newImageRect( imageGroup, "red-ball.png", 128, 128 )
redBall.x = display.contentCenterX
redBall.y = display.contentCenterY

-- Create a blue ball inside the same group
local blueBall = display.newImageRect( imageGroup, "blue-ball.png", 128, 128 )
blueBall.x = display.contentCenterX
blueBall.y = display.contentCenterY

-- Make the blue ball invisible
blueBall.isVisible = false</pre>
<p>Now let’s focus on the swapping code:</p>
<pre class="brush: lua;">for i = 1,imageGroup.numChildren do
    if ( imageGroup[i].isVisible == false ) then
        imageGroup[i].isVisible = true
    else
        imageGroup[i].isVisible = false
    end
end</pre>
<p>Simply enough, this code loops through the children of <code>imageGroup</code> which are obviously <code>redBall</code> and <code>blueBall</code>. If the child is invisible, it’s toggled back to visible and <nobr>vice-versa</nobr> <nobr>(visible to invisible)</nobr>.</p>
</section>
<section id="fill-swap" class="level2">
<h2>Fill Swap</h2>
<p>You can also take advantage of the graphics “fill” methods to swap images:</p>
<pre class="brush: lua;">local image1 = { type="image", filename="red-ball.png" }
local image2 = { type="image", filename="blue-ball.png" }

local ball = display.newRect( display.contentCenterX, display.contentCenterY, 128, 128 )
ball.fill = image1
ball.isShowing = "image1"</pre>
<p>This method eliminates the need for the display group — we just create a base display object (in this case a rectangle the size of the images) and fill it with the <code>image1</code> paint of <nobr><code>red-ball.png</code></nobr>. We also declare one additional property for the ball, <code>isShowing</code>, to be used in the swapping code as follows:</p>
<pre class="brush: lua;">if ( ball.isShowing == "image1" ) then
    ball.fill = image2
    ball.isShowing = "image2"
else
    ball.fill = image1
    ball.isShowing = "image1"
end</pre>
</section>
<section id="multi-image-swap" class="level2">
<h2>Multi-Image Swap</h2>
<p>Sometimes you’ll want to swap more than two images. In this case, we can go back to the display group model, load all of the images into an array, and access them via their index number. Here, we iterate through the <code>imageCache</code> table to create the display objects, storing them in the <code>balls</code> table as we go along, and make each one invisible. Then, we make the first one visible again.</p>
<pre class="brush: lua;">local imageGroup = display.newGroup()

local imageCache = {
    "red-ball.png",
    "blue-ball.png",
    "green-ball.png",
    "yellow-ball.png",
    "purple-ball.png"
}

local balls = {}
for i = 1,#imageCache do
    balls[i] = display.newImageRect( imageGroup, imageCache[i], 128, 128 )
    balls[i].x = display.contentCenterX
    balls[i].y = display.contentCenterY
    balls[i].isVisible = false
end

imageGroup.isShowing = 1
balls[imageGroup.isShowing].isVisible = true</pre>
<p>Now, to manage the swapping, we can execute the following code, setting the local variable <code>showingImage</code> to the index of the image we want to show. In this case, the value of <code>4</code> will show the <nobr><code>yellow-ball.png</code></nobr> image because that image was declared in the 4th position of the <code>imageCache</code> array.</p>
<pre class="brush: lua;">local showingImage = 4

for i = 1,imageGroup.numChildren do
    if ( i == showingImage ) then
        imageGroup[i].isVisible = true
    else
        imageGroup[i].isVisible = false
    end
end</pre>
</section>
<section id="image-sheets-and-sprites" class="level2">
<h2>Image Sheets and Sprites</h2>
<p>While the above methods are all perfectly valid, using individual image files is not the best use of memory and loading time. Also, creating/storing a large amount of individual files in your project directory can get chaotic. This is why we encourage the use of <a href="../../../guide/media/imageSheets/index.html">image sheets</a> in which you load a single image sheet/atlas containing all of the individual images and then display a specific frame from it. Image sheets take a little more initial setup but the the benefits are well worth it.</p>
<div style="max-width: 320px;">
<p><img src="../../../images/docs/colored-balls.png" /></p>
</div>
<p>Converting the above code to an image sheet may look like this:</p>
<pre class="highlight: [3,4,5,6,7,8,9,10,13,14]; first-line: 1; gutter: false; brush: lua;">local imageGroup = display.newGroup()

local sheetOptions = {
    width = 128,
    height = 128,
    numFrames = 5,
    sheetContentWidth = 640,
    sheetContentHeight = 128
}
local ballSheet = graphics.newImageSheet( "ballSheet.png", sheetOptions )

local balls = {}
for i = 1,sheetOptions.numFrames do
    balls[i] = display.newImageRect( imageGroup, ballSheet, i, 128, 128 )
    balls[i].x = display.contentCenterX
    balls[i].y = display.contentCenterY
    balls[i].isVisible = false
end

imageGroup.isShowing = 2
balls[imageGroup.isShowing].isVisible = true</pre>
<p>From a code perspective, this is not much different from the array method above, other than the efficiencies gained from using image sheets — but image sheets are a gateway to <strong>sprites</strong>, an excellent way swap images!</p>
<section id="sprite-frame-swapping" class="level3">
<h3>Sprite Frame Swapping</h3>
<p>Solar2D includes a comprehensive <a href="../../../guide/media/spriteAnimation/index.html">sprite</a> engine. While the term “sprite” may seem to indicate only an <strong>animated</strong> object in a game, you should consider it as simply an ordered sequence of images which can be used for multiple purposes, including swapping images.</p>
<p>Let’s look at a <nobr>sprite-based</nobr> version which builds upon the image sheet version above:</p>
<pre class="highlight: [10,11]; first-line: 1; gutter: false; brush: lua;">local sheetOptions = {
    width = 128,
    height = 128,
    numFrames = 5,
    sheetContentWidth = 640,
    sheetContentHeight = 128
}
local ballSheet = graphics.newImageSheet( "ballSheet.png", sheetOptions )

local ball = display.newSprite( ballSheet, { name="balls", start=1, count=sheetOptions.numFrames } )
ball:setFrame( 2 )
ball.x = display.contentCenterX
ball.y = display.contentCenterY</pre>
<p>Like the version using graphics fills, we no longer need the display group (<code>imageGroup</code>) since the sprite is, by definition, a <nobr>multi-frame</nobr> object than can reside in any group by itself. Once the image sheet is set up, simply call <a href="../../../api/library/display/newSprite.html">display.newSprite()</a> with the image sheet and the sequence data. Next, use the <a href="../../../api/type/SpriteObject/setFrame.html">object:setFrame()</a> method to pick which frame to display and the sprite engine handles the rest — no need to toggle the visibility of other images as in some of the other examples.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2>Conclusion</h2>
<p>As you can see, there are various approaches and methods to the “swap images” concept and it depends on your needs and design specifics as to which method is most suitable. From individual images to fills to sprites, Solar2D has you covered!</p>
<hr>
<div id="footer">
<p class="copyright">
© 2020-2024 Solar2D All Rights Reserved.
</p>
<p class="feedback">
Help us help you! If you notice a problem with this page, please report it.
</p>
<p><a class="feedback-button" href="https://github.com/coronalabs/corona-docs/issues" target="_blank">Report an Issue</a></p>
</div>
</section>
</section>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shCore.js" type="text/javascript"></script>
<script src="https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shAutoloader.js" type="text/javascript"></script>
<script type="text/javascript">
    // Define syntax highlighting scripts.
    // N.B.: As a safeguard, you will need to whitelist the brush in filter-SyntaxHighlighter.py

    SyntaxHighlighter.autoloader(
      ['c#','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushCSharp.js'],
      ['java','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJava.js'],
      ['js','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushJScript.js'],
      ['lua','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushLua.js'],
      ['php','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushPhp.js'],
      ['sql','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushSql.js'],
      ['xml','https://corona-cdn.coronalabs.com/js/SyntaxHighlighter/shBrushXml.js']
    );

    // Set default configurations.
    SyntaxHighlighter.defaults['gutter'] = false; // Disable line numbers.
    SyntaxHighlighter.defaults['toolbar'] = false; // Disable link back to author's site. :(
	SyntaxHighlighter.defaults['quick-code'] = false; // Disable double click feature

    // Perform the highlighting.
    SyntaxHighlighter.all();
</script>
</body>
</html>
